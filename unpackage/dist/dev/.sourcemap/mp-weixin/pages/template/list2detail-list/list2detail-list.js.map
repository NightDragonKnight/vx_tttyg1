{"version":3,"file":"list2detail-list.js","sources":["pages/template/list2detail-list/list2detail-list.vue","../../../../../Work-Tools/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcdGVtcGxhdGVcbGlzdDJkZXRhaWwtbGlzdFxsaXN0MmRldGFpbC1saXN0LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view>\r\n\t\t<view class=\"banner\" @click=\"goDetail(banner)\">\r\n\t\t\t<image class=\"banner-img\" :src=\"banner.cover\"></image>\r\n\t\t\t<view class=\"banner-title\">{{ banner.title }}</view>\r\n\t\t</view>\r\n\t\t<view class=\"uni-list\">\r\n\t\t\t<block v-for=\"(value, index) in listData\" :key=\"index\">\r\n\t\t\t\t<view class=\"uni-list-cell\" hover-class=\"uni-list-cell-hover\" @click=\"goDetail(value)\">\r\n\t\t\t\t\t<view class=\"uni-media-list\">\r\n\t\t\t\t\t\t<image class=\"uni-media-list-logo\" :src=\"value.cover\"></image>\r\n\t\t\t\t\t\t<view class=\"uni-media-list-body\">\r\n\t\t\t\t\t\t\t<view class=\"uni-media-list-text-top\">{{ value.title }}</view>\r\n\t\t\t\t\t\t\t<view class=\"uni-media-list-text-bottom\">\r\n\t\t\t\t\t\t\t\t<text>{{ value.author_name }}</text>\r\n\t\t\t\t\t\t\t\t<text>{{ value.published_at }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- #ifdef APP-PLUS -->\r\n\t\t\t\t<view class=\"ad-view\" v-if=\"(index > 0 && (index+1) % 10 == 0)\">\r\n\t\t\t\t\t<ad :adpid=\"adpid\" @error=\"aderror\"></ad>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t</block>\r\n\t\t</view>\r\n\t\t<uni-load-more :status=\"status\" :icon-size=\"16\" :content-text=\"contentText\" />\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { dateUtils } from  '../../../common/util.js';\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tbanner: {},\r\n\t\t\t\tlistData: [],\r\n\t\t\t\tlast_id: '',\r\n\t\t\t\treload: false,\r\n\t\t\t\tstatus: 'more',\r\n\t\t\t\tadpid: '',\r\n\t\t\t\tcontentText: {\r\n\t\t\t\t\tcontentdown: '上拉加载更多',\r\n\t\t\t\t\tcontentrefresh: '加载中',\r\n\t\t\t\t\tcontentnomore: '没有更多'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.adpid = this.$adpid;\r\n\t\t\tthis.getBanner();\r\n\t\t\tthis.getList();\r\n\t\t},\r\n\t\tonPullDownRefresh() {\r\n\t\t\tthis.reload = true;\r\n\t\t\tthis.last_id = '';\r\n\t\t\tthis.getBanner();\r\n\t\t\tthis.getList();\r\n\t\t},\r\n\t\tonReachBottom() {\r\n\t\t\tthis.status = 'more';\r\n\t\t\tthis.getList();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetBanner() {\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tcolumn: 'id,post_id,title,author_name,cover,published_at' //需要的字段名\r\n\t\t\t\t};\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'https://unidemo.dcloud.net.cn/api/banner/36kr',\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: data => {\r\n\t\t\t\t\t\tuni.stopPullDownRefresh();\r\n\t\t\t\t\t\tif (data.statusCode == 200) {\r\n\t\t\t\t\t\t\tthis.banner = data.data;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (data, code) => {\r\n\t\t\t\t\t\tconsole.log('fail' + JSON.stringify(data));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetList() {\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tcolumn: 'id,post_id,title,author_name,cover,published_at' //需要的字段名\r\n\t\t\t\t};\r\n\t\t\t\tif (this.last_id) {\r\n\t\t\t\t\t//说明已有数据，目前处于上拉加载\r\n\t\t\t\t\tthis.status = 'loading';\r\n\t\t\t\t\tdata.minId = this.last_id;\r\n\t\t\t\t\tdata.time = new Date().getTime() + '';\r\n\t\t\t\t\tdata.pageSize = 10;\r\n\t\t\t\t}\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'https://unidemo.dcloud.net.cn/api/news',\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: data => {\r\n\t\t\t\t\t\tif (data.statusCode == 200) {\r\n\t\t\t\t\t\t\tlet list = this.setTime(data.data);\r\n\t\t\t\t\t\t\tthis.listData = this.reload ? list : this.listData.concat(list);\r\n\t\t\t\t\t\t\tthis.last_id = list[list.length - 1].id;\r\n\t\t\t\t\t\t\tthis.reload = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (data, code) => {\r\n\t\t\t\t\t\tconsole.log('fail' + JSON.stringify(data));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgoDetail: function(e) {\r\n\t\t\t\t// \t\t\t\tif (!/前|刚刚/.test(e.published_at)) {\r\n\t\t\t\t// \t\t\t\t\te.published_at = dateUtils.format(e.published_at);\r\n\t\t\t\t// \t\t\t\t}\r\n\t\t\t\tlet detail = {\r\n\t\t\t\t\tauthor_name: e.author_name,\r\n\t\t\t\t\tcover: e.cover,\r\n\t\t\t\t\tid: e.id,\r\n\t\t\t\t\tpost_id: e.post_id,\r\n\t\t\t\t\tpublished_at: e.published_at,\r\n\t\t\t\t\ttitle: e.title\r\n\t\t\t\t};\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../list2detail-detail/list2detail-detail?detailDate=' + encodeURIComponent(JSON.stringify(detail))\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsetTime: function(items) {\r\n\t\t\t\tvar newItems = [];\r\n\t\t\t\titems.forEach(e => {\r\n\t\t\t\t\tnewItems.push({\r\n\t\t\t\t\t\tauthor_name: e.author_name,\r\n\t\t\t\t\t\tcover: e.cover,\r\n\t\t\t\t\t\tid: e.id,\r\n\t\t\t\t\t\tpost_id: e.post_id,\r\n\t\t\t\t\t\tpublished_at: dateUtils.format(e.published_at),\r\n\t\t\t\t\t\ttitle: e.title\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\treturn newItems;\r\n\t\t\t},\r\n\t\t\taderror(e) {\r\n\t\t\t\tconsole.log(\"aderror: \" + JSON.stringify(e.detail));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.banner {\r\n\t\theight: 360rpx;\r\n\t\toverflow: hidden;\r\n\t\tposition: relative;\r\n\t\tbackground-color: #ccc;\r\n\t}\r\n\r\n\t.banner-img {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.banner-title {\r\n\t\tmax-height: 84rpx;\r\n\t\toverflow: hidden;\r\n\t\tposition: absolute;\r\n\t\tleft: 30rpx;\r\n\t\tbottom: 30rpx;\r\n\t\twidth: 90%;\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 400;\r\n\t\tline-height: 42rpx;\r\n\t\tcolor: white;\r\n\t\tz-index: 11;\r\n\t}\r\n\r\n\t.uni-media-list-logo {\r\n\t\twidth: 180rpx;\r\n\t\theight: 140rpx;\r\n\t}\r\n\r\n\t.uni-media-list-body {\r\n\t\theight: auto;\r\n\t\tjustify-content: space-around;\r\n\t}\r\n\r\n\t.uni-media-list-text-top {\r\n\t\theight: 74rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.uni-media-list-text-bottom {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'D:/workspace/2025/wx/wx20250829/天天体验馆/pages/template/list2detail-list/list2detail-list.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","data","dateUtils"],"mappings":";;;AAkCC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,QAAQ,CAAE;AAAA,MACV,UAAU,CAAE;AAAA,MACZ,SAAS;AAAA,MACT,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,aAAa;AAAA,QACZ,aAAa;AAAA,QACb,gBAAgB;AAAA,QAChB,eAAe;AAAA,MAChB;AAAA;EAED;AAAA,EACD,SAAS;AACR,SAAK,QAAQ,KAAK;AAClB,SAAK,UAAS;AACd,SAAK,QAAO;AAAA,EACZ;AAAA,EACD,oBAAoB;AACnB,SAAK,SAAS;AACd,SAAK,UAAU;AACf,SAAK,UAAS;AACd,SAAK,QAAO;AAAA,EACZ;AAAA,EACD,gBAAgB;AACf,SAAK,SAAS;AACd,SAAK,QAAO;AAAA,EACZ;AAAA,EACD,SAAS;AAAA,IACR,YAAY;AACX,UAAI,OAAO;AAAA,QACV,QAAQ;AAAA;AAAA;AAETA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAK;AAAA,QACL;AAAA,QACA,SAAS,CAAAC,UAAQ;AAChBD,wBAAG,MAAC,oBAAmB;AACvB,cAAIC,MAAK,cAAc,KAAK;AAC3B,iBAAK,SAASA,MAAK;AAAA,UACpB;AAAA,QACA;AAAA,QACD,MAAM,CAACA,OAAM,SAAS;AACrBD,yGAAY,SAAS,KAAK,UAAUC,KAAI,CAAC;AAAA,QAC1C;AAAA,MACD,CAAC;AAAA,IACD;AAAA,IACD,UAAU;AACT,UAAI,OAAO;AAAA,QACV,QAAQ;AAAA;AAAA;AAET,UAAI,KAAK,SAAS;AAEjB,aAAK,SAAS;AACd,aAAK,QAAQ,KAAK;AAClB,aAAK,QAAO,oBAAI,KAAM,GAAC,QAAO,IAAK;AACnC,aAAK,WAAW;AAAA,MACjB;AACAD,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAK;AAAA,QACL;AAAA,QACA,SAAS,CAAAC,UAAQ;AAChB,cAAIA,MAAK,cAAc,KAAK;AAC3B,gBAAI,OAAO,KAAK,QAAQA,MAAK,IAAI;AACjC,iBAAK,WAAW,KAAK,SAAS,OAAO,KAAK,SAAS,OAAO,IAAI;AAC9D,iBAAK,UAAU,KAAK,KAAK,SAAS,CAAC,EAAE;AACrC,iBAAK,SAAS;AAAA,UACf;AAAA,QACA;AAAA,QACD,MAAM,CAACA,OAAM,SAAS;AACrBD,0GAAY,SAAS,KAAK,UAAUC,KAAI,CAAC;AAAA,QAC1C;AAAA,MACD,CAAC;AAAA,IACD;AAAA,IACD,UAAU,SAAS,GAAG;AAIrB,UAAI,SAAS;AAAA,QACZ,aAAa,EAAE;AAAA,QACf,OAAO,EAAE;AAAA,QACT,IAAI,EAAE;AAAA,QACN,SAAS,EAAE;AAAA,QACX,cAAc,EAAE;AAAA,QAChB,OAAO,EAAE;AAAA;AAEVD,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,yDAAyD,mBAAmB,KAAK,UAAU,MAAM,CAAC;AAAA,MACxG,CAAC;AAAA,IACD;AAAA,IACD,SAAS,SAAS,OAAO;AACxB,UAAI,WAAW,CAAA;AACf,YAAM,QAAQ,OAAK;AAClB,iBAAS,KAAK;AAAA,UACb,aAAa,EAAE;AAAA,UACf,OAAO,EAAE;AAAA,UACT,IAAI,EAAE;AAAA,UACN,SAAS,EAAE;AAAA,UACX,cAAcE,YAAS,UAAC,OAAO,EAAE,YAAY;AAAA,UAC7C,OAAO,EAAE;AAAA,QACV,CAAC;AAAA,MACF,CAAC;AACD,aAAO;AAAA,IACP;AAAA,IACD,QAAQ,GAAG;AACVF,0BAAA,MAAA,OAAA,+DAAY,cAAc,KAAK,UAAU,EAAE,MAAM,CAAC;AAAA,IACnD;AAAA,EACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/IF,GAAG,WAAW,eAAe;"}