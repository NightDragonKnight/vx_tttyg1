{"version":3,"file":"chat.js","sources":["pages/extUI/list/chat.vue","../../../../../Work-Tools/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcZXh0VUlcbGlzdFxjaGF0LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view>\r\n\t\t<uni-card :is-shadow=\"false\" is-full>\r\n\t\t\t<text class=\"uni-h6\">此示例展示了聊天列表的使用场景。</text>\r\n\t\t</uni-card>\r\n\t\t<uni-section title=\"圆头像且不显示分割线\" type=\"line\">\r\n\t\t\t<uni-list :border=\"false\">\r\n\t\t\t\t<uni-list-chat v-for=\"item in listData\" :avatar-circle=\"true\" :key=\"item.id\" :title=\"item.author_name\" :avatar=\"item.cover\"\r\n\t\t\t\t :note=\"item.title\" :time=\"item.published_at\" :clickable=\"false\"></uni-list-chat>\r\n\t\t\t</uni-list>\r\n\t\t</uni-section>\r\n\r\n\t\t<uni-section title=\"带圆点\" type=\"line\">\r\n\t\t\t<uni-list>\r\n\t\t\t\t<uni-list-chat v-for=\"item in listData\" :key=\"item.id\" :title=\"item.author_name\" :avatar=\"item.cover\" :note=\"item.title\"\r\n\t\t\t\t :time=\"item.published_at\" :badge-text=\"item.text\" :clickable=\"false\" badge-positon=\"left\" badge-text=\"dot\"></uni-list-chat>\r\n\t\t\t</uni-list>\r\n\t\t</uni-section>\r\n\r\n\t\t<uni-section title=\"自定义右侧内容\" type=\"line\">\r\n\t\t\t<uni-list>\r\n\t\t\t\t<uni-list-chat v-for=\"item in listData\" :key=\"item.id\" :title=\"item.author_name\" :avatar=\"item.cover\" :note=\"item.title\"\r\n\t\t\t\t badge-positon=\"left\" :badge-text=\"item.text\">\r\n\t\t\t\t\t<view class=\"chat-custom-right\">\r\n\t\t\t\t\t\t<text class=\"chat-custom-text\">刚刚</text>\r\n\t\t\t\t\t\t<uni-icons type=\"star-filled\" color=\"#999\" size=\"18\"></uni-icons>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</uni-list-chat>\r\n\t\t\t</uni-list>\r\n\t\t</uni-section>\r\n\r\n\t\t<uni-section title=\"带通知角标的单头像聊天列表\" type=\"line\">\r\n\t\t\t<uni-list>\r\n\t\t\t\t<uni-list-chat v-for=\"item in listData\" :key=\"item.id\" :title=\"item.author_name\" :avatar=\"item.cover\" :note=\"item.title\"\r\n\t\t\t\t :time=\"item.published_at\" :clickable=\"true\" :badge-text=\"item.text\" @click=\"onClick\"></uni-list-chat>\r\n\t\t\t</uni-list>\r\n\t\t</uni-section>\r\n\r\n\t\t<uni-section title=\"带通知角标的多头像聊天列表\" type=\"line\">\r\n\t\t\t<uni-list>\r\n\t\t\t\t<uni-list-chat v-for=\"(item,index) in listData\" :key=\"item.id\" :title=\"item.author_name\" :avatar=\"item.cover\" :note=\"item.title\"\r\n\t\t\t\t :time=\"item.published_at\" :clickable=\"true\" :avatarList=\"avatar(index+1)\" :badge-text=\"item.text\" @click=\"onClick\"></uni-list-chat>\r\n\t\t\t</uni-list>\r\n\t\t</uni-section>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tcomponents: {},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tUNITS: {\r\n\t\t\t\t\t'年': 31557600000,\r\n\t\t\t\t\t'月': 2629800000,\r\n\t\t\t\t\t'天': 86400000,\r\n\t\t\t\t\t'小时': 3600000,\r\n\t\t\t\t\t'分钟': 60000,\r\n\t\t\t\t\t'秒': 1000\r\n\t\t\t\t},\r\n\t\t\t\tlistData: [],\r\n\t\t\t\tavatarList: [{\r\n\t\t\t\t\turl: '/static/logo.png'\r\n\t\t\t\t}, {\r\n\t\t\t\t\turl: '/static/logo.png'\r\n\t\t\t\t}, {\r\n\t\t\t\t\turl: '/static/logo.png'\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.getList()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonClick() {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '列表被点击'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tavatar(count) {\r\n\t\t\t\tlet arr = []\r\n\t\t\t\tthis.avatarList.forEach((item, index) => {\r\n\t\t\t\t\tif (index < count) {\r\n\t\t\t\t\t\tarr.push(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn arr\r\n\t\t\t},\r\n\t\t\tgetList() {\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tcolumn: 'id,post_id,title,author_name,cover,published_at' //需要的字段名\r\n\t\t\t\t};\r\n\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'https://unidemo.dcloud.net.cn/api/news',\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: data => {\r\n\t\t\t\t\t\tif (data.statusCode == 200) {\r\n\t\t\t\t\t\t\tlet list = this.setTime(data.data);\r\n\t\t\t\t\t\t\tlist = this.reload ? list : this.listData.concat(list);\r\n\t\t\t\t\t\t\tlist.map(item => {\r\n\t\t\t\t\t\t\t\titem.text = Math.floor(Math.random() * (1 - 20) + 20)\r\n\t\t\t\t\t\t\t\treturn item\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.listData = this.getRandomArrayElements(list, 3)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (data, code) => {\r\n\t\t\t\t\t\tconsole.log('fail' + JSON.stringify(data));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetRandomArrayElements(arr, count) {\r\n\t\t\t\tvar shuffled = arr.slice(0),\r\n\t\t\t\t\ti = arr.length,\r\n\t\t\t\t\tmin = i - count,\r\n\t\t\t\t\ttemp, index;\r\n\t\t\t\twhile (i-- > min) {\r\n\t\t\t\t\tindex = Math.floor((i + 1) * Math.random());\r\n\t\t\t\t\ttemp = shuffled[index];\r\n\t\t\t\t\tshuffled[index] = shuffled[i];\r\n\t\t\t\t\tshuffled[i] = temp;\r\n\t\t\t\t}\r\n\t\t\t\treturn shuffled.slice(min);\r\n\t\t\t},\r\n\t\t\tsetTime(items) {\r\n\t\t\t\tvar newItems = [];\r\n\t\t\t\titems.forEach(e => {\r\n\t\t\t\t\tnewItems.push({\r\n\t\t\t\t\t\tauthor_name: e.author_name,\r\n\t\t\t\t\t\tcover: e.cover,\r\n\t\t\t\t\t\tid: e.id,\r\n\t\t\t\t\t\tpost_id: e.post_id,\r\n\t\t\t\t\t\tpublished_at: this.format(e.published_at),\r\n\t\t\t\t\t\ttitle: e.title\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\treturn newItems;\r\n\t\t\t},\r\n\t\t\tformat(dateStr) {\r\n\t\t\t\tvar date = this.parse(dateStr)\r\n\t\t\t\tvar diff = Date.now() - date.getTime();\r\n\t\t\t\tif (diff < this.UNITS['天']) {\r\n\t\t\t\t\treturn this.humanize(diff);\r\n\t\t\t\t}\r\n\t\t\t\tvar _format = function(number) {\r\n\t\t\t\t\treturn (number < 10 ? ('0' + number) : number);\r\n\t\t\t\t};\r\n\t\t\t\treturn date.getFullYear() + '-' + _format(date.getMonth() + 1) + '-' + _format(date.getDate()) + ' ' +\r\n\t\t\t\t\t_format(date.getHours()) + ':' + _format(date.getMinutes());\r\n\t\t\t},\r\n\t\t\tparse(str) { //将\"yyyy-mm-dd HH:MM:ss\"格式的字符串，转化为一个Date对象\r\n\t\t\t\tvar a = str.split(/[^0-9]/);\r\n\t\t\t\treturn new Date(a[0], a[1] - 1, a[2], a[3], a[4], a[5]);\r\n\t\t\t},\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" >\r\n\t.chat-custom-right {\r\n\t\tflex: 1;\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tdisplay: flex;\r\n\t\t/* #endif */\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: flex-end;\r\n\t}\r\n\r\n\t.chat-custom-text {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #999;\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'D:/workspace/2025/wx/wx20250829/天天体验馆/pages/extUI/list/chat.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","data"],"mappings":"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"}