{"version":3,"file":"request.js","sources":["pages/API/request/request.vue","../../../../../Work-Tools/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcQVBJXHJlcXVlc3RccmVxdWVzdC52dWU"],"sourcesContent":["<template>\r\n\t<view>\r\n\t\t<page-head :title=\"title\"></page-head>\r\n\t\t<view class=\"uni-padding-wrap uni-common-mt\">\r\n\t\t\t<view class=\"uni-hello-text\">\r\n\t\t\t\t请点击按钮向服务器发起请求\r\n\t\t\t</view>\r\n\t\t\t<view class=\"uni-textarea uni-common-mt\">\r\n\t\t\t\t<textarea :value=\"res\"></textarea>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"uni-btn-v uni-common-mt\">\r\n\t\t\t\t<button type=\"primary\" @click=\"sendRequest\" :loading=\"loading\">发起请求（Callback）</button>\r\n\t\t\t\t<button type=\"primary\" @click=\"sendRequest('promise')\" :loading=\"loading\">发起请求（Promise）</button>\r\n\t\t\t\t<button type=\"primary\" @click=\"sendRequest('await')\" :loading=\"loading\">发起请求（Async/Await）</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\tconst requestUrl = 'https://unidemo.dcloud.net.cn/ajax/echo/text?name=uni-app'\r\n\tconst duration = 2000\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: 'request',\r\n\t\t\t\tloading: false,\r\n\t\t\t\tres: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsendRequest(mode) {\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tswitch (mode) {\r\n\t\t\t\t\tcase 'promise':\r\n\t\t\t\t\t\tthis._requestPromise();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'await':\r\n\t\t\t\t\t\tthis._requestAwait();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthis._request();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_request() {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: requestUrl,\r\n\t\t\t\t\tdataType: 'text',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tnoncestr: Date.now()\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('request success', res)\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '请求成功',\r\n\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\t\tduration: duration\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.res = '请求结果 : ' + JSON.stringify(res);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.log('request fail', err);\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent: err.errMsg,\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t_requestPromise() {\n\t\t\t\t// #ifndef VUE3\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: requestUrl,\r\n\t\t\t\t\tdataType: 'text',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tnoncestr: Date.now()\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tconsole.log('request success', res[1]);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请求成功',\r\n\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\tduration: duration\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.res = '请求结果 : ' + JSON.stringify(res[1]);\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tconsole.log('request fail', err);\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: err.errMsg,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t});\n\t\t\t\t// #endif\n\n\t\t\t\t// #ifdef VUE3\n\t\t\t\tuni.request({\n\t\t\t\t\turl: requestUrl,\n\t\t\t\t\tdataType: 'text',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tnoncestr: Date.now()\n\t\t\t\t\t}\n\t\t\t\t}).then(res => {\n\t\t\t\t\tconsole.log('request success', res);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '请求成功',\n\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\tmask: true,\n\t\t\t\t\t\tduration: duration\n\t\t\t\t\t});\n\t\t\t\t\tthis.res = '请求结果 : ' + JSON.stringify(res);\n\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tconsole.log('request fail', err);\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\tcontent: err.errMsg,\n\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t});\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tasync _requestAwait() {\n\t\t\t\tlet res, err\n\t\t\t\t// #ifndef VUE3\n\t\t\t\t[err, res] = await uni.request({\r\n\t\t\t\t\turl: requestUrl,\r\n\t\t\t\t\tdataType: 'text',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tnoncestr: Date.now()\r\n\t\t\t\t\t}\r\n\t\t\t\t});\n\t\t\t\t// #endif\n\t\t\t\t// #ifdef VUE3\n\t\t\t\ttry {\n\t\t\t\tres = await uni.request({\n\t\t\t\t\turl: requestUrl,\n\t\t\t\t\tdataType: 'text',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tnoncestr: Date.now()\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t} catch(e){\n\t\t\t\t\terr=e\n\t\t\t\t}\n\t\t\t\t// #endif\r\n\t\t\t\tif (err) {\r\n\t\t\t\t\tconsole.log('request fail', err);\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: err.errMsg,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('request success', res)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请求成功',\r\n\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\tduration: duration\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.res = '请求结果 : ' + JSON.stringify(res);\r\n\t\t\t\t}\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\n","import MiniProgramPage from 'D:/workspace/2025/wx/wx20250829/天天体验馆/pages/API/request/request.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}