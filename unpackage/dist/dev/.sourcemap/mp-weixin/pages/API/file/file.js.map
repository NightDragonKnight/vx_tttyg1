{"version":3,"file":"file.js","sources":["pages/API/file/file.vue","../../../../../Work-Tools/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcQVBJXGZpbGVcZmlsZS52dWU"],"sourcesContent":["<template>\r\n\t<view>\r\n\t\t<page-head :title=\"title\"></page-head>\r\n\t\t<view class=\"uni-padding-wrap uni-common-mt\">\r\n\t\t\t<block v-if=\"tempFilePath\">\r\n\t\t\t\t<image :src=\"tempFilePath\" class=\"image\" mode=\"aspectFit\"></image>\r\n\t\t\t</block>\r\n\t\t\t<block v-if=\"!tempFilePath && savedFilePath\">\r\n\t\t\t\t<image :src=\"savedFilePath\" class=\"image\" mode=\"aspectFit\"></image>\r\n\t\t\t</block>\r\n\t\t\t<block v-if=\"!tempFilePath && !savedFilePath\">\r\n\t\t\t\t<view class=\"uni-hello-addfile\" @click=\"chooseImage\">+ 请选择文件</view>\r\n\t\t\t</block>\r\n\t\t\t<view class=\"uni-btn-v\">\r\n\t\t\t\t<button class=\"btn-savefile\" @click=\"saveFile\">保存文件</button>\r\n\t\t\t\t<button @click=\"clear\">删除文件</button>\r\n\t\t\t</view>\r\n\t\t\t<!-- #ifndef MP-ALIPAY || MP-TOUTIAO -->\r\n\t\t\t<view class=\"btn-area\">\r\n\t\t\t\t<button @click=\"openDocument\">打开pdf文件</button>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: 'saveFile',\r\n\t\t\t\ttempFilePath: '',\r\n\t\t\t\tsavedFilePath: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.savedFilePath = uni.getStorageSync('savedFilePath');\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tchooseImage() {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.tempFilePath = res.tempFilePaths[0];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t// #ifdef MP\r\n\t\t\t\t\t\tuni.getSetting({\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\tlet authStatus = res.authSetting['scope.album'] && res.authSetting['scope.camera'];\r\n\t\t\t\t\t\t\t\tif (!authStatus) {\r\n\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '授权失败',\r\n\t\t\t\t\t\t\t\t\t\tcontent: 'Hello uni-app需要从您的相机或相册获取图片，请在设置界面打开相关权限',\r\n\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.openSetting()\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsaveFile() {\r\n\t\t\t\tif (this.tempFilePath.length > 0) {\r\n\t\t\t\t\tuni.saveFile({\r\n\t\t\t\t\t\ttempFilePath: this.tempFilePath,\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tthis.savedFilePath = res.savedFilePath;\r\n\t\t\t\t\t\t\tuni.setStorageSync('savedFilePath', res.savedFilePath);\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '保存成功',\r\n\t\t\t\t\t\t\t\tcontent: '下次进入页面时，此文件仍可用',\r\n\t\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '保存失败',\r\n\t\t\t\t\t\t\t\tcontent: '失败原因: ' + JSON.stringify(res),\r\n\t\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: '请选择文件',\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tclear() {\r\n\t\t\t\tuni.setStorageSync('savedFilePath', '');\r\n\t\t\t\tthis.tempFilePath = '';\r\n\t\t\t\tthis.savedFilePath = '';\r\n\t\t\t},\r\n\t\t\t// #ifndef MP-ALIPAY || MP-TOUTIAO\r\n\t\t\topenDocument() {\r\n\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\turl: 'https://web-assets.dcloud.net.cn/unidoc/zh/helloworld.pdf',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.openDocument({\r\n\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\tconsole.log('打开文档成功');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.image {\r\n\t\twidth: 100%;\r\n\t\theight: 360rpx;\r\n\t}\r\n\r\n\t.btn-savefile {\r\n\t\tbackground-color: #007aff;\r\n\t\tcolor: #ffffff;\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'D:/workspace/2025/wx/wx20250829/天天体验馆/pages/API/file/file.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","res"],"mappings":";;AA0BC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,OAAO;AAAA,MACP,cAAc;AAAA,MACd,eAAe;AAAA,IAChB;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,gBAAgBA,cAAAA,MAAI,eAAe,eAAe;AAAA,EACvD;AAAA,EACD,SAAS;AAAA,IACR,cAAc;AACbA,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,QACP,SAAS,CAAC,QAAQ;AACjB,eAAK,eAAe,IAAI,cAAc,CAAC;AAAA,QACvC;AAAA,QACD,MAAM,CAAC,QAAQ;AAEdA,wBAAAA,MAAI,WAAW;AAAA,YACd,SAAS,CAAC,QAAQ;AACjB,kBAAI,aAAa,IAAI,YAAY,aAAa,KAAK,IAAI,YAAY,cAAc;AACjF,kBAAI,CAAC,YAAY;AAChBA,8BAAAA,MAAI,UAAU;AAAA,kBACb,OAAO;AAAA,kBACP,SAAS;AAAA,kBACT,SAAS,CAACC,SAAQ;AACjB,wBAAIA,KAAI,SAAS;AAChBD,oCAAAA,MAAI,YAAY;AAAA,oBACjB;AAAA,kBACD;AAAA,iBACA;AAAA,cACF;AAAA,YACD;AAAA,WACA;AAAA,QAEF;AAAA,MACD,CAAC;AAAA,IACD;AAAA,IACD,WAAW;AACV,UAAI,KAAK,aAAa,SAAS,GAAG;AACjCA,sBAAAA,MAAI,SAAS;AAAA,UACZ,cAAc,KAAK;AAAA,UACnB,SAAS,CAAC,QAAQ;AACjB,iBAAK,gBAAgB,IAAI;AACzBA,0BAAAA,MAAI,eAAe,iBAAiB,IAAI,aAAa;AACrDA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,SAAS;AAAA,cACT,YAAY;AAAA,YACb,CAAC;AAAA,UACD;AAAA,UACD,MAAM,CAAC,QAAQ;AACdA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,SAAS,WAAW,KAAK,UAAU,GAAG;AAAA,cACtC,YAAY;AAAA,YACb,CAAC;AAAA,UACF;AAAA,SACA;AAAA,aACK;AACNA,sBAAAA,MAAI,UAAU;AAAA,UACb,SAAS;AAAA,UACT,YAAY;AAAA,QACb,CAAC;AAAA,MACF;AAAA,IACA;AAAA,IACD,QAAQ;AACPA,oBAAAA,MAAI,eAAe,iBAAiB,EAAE;AACtC,WAAK,eAAe;AACpB,WAAK,gBAAgB;AAAA,IACrB;AAAA,IAED,eAAe;AACdA,oBAAAA,MAAI,aAAa;AAAA,QAChB,KAAK;AAAA,QACL,SAAS,CAAC,QAAQ;AACjBA,wBAAAA,MAAI,aAAa;AAAA,YAChB,UAAU,IAAI;AAAA,YACd,SAAS,MAAM;AACdA,4BAAAA,MAAY,MAAA,OAAA,kCAAA,QAAQ;AAAA,YACrB;AAAA,UACD,CAAC;AAAA,QACF;AAAA,MACD,CAAC;AAAA,IACD;AAAA,EAEF;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClHD,GAAG,WAAW,eAAe;"}