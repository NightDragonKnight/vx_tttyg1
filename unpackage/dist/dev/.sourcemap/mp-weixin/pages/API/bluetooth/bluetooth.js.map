{"version":3,"file":"bluetooth.js","sources":["pages/API/bluetooth/bluetooth.vue","../../../../../Work-Tools/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcQVBJXGJsdWV0b290aFxibHVldG9vdGgudnVl"],"sourcesContent":["<template>\r\n\t<view>\r\n\t\t<page-head :title=\"title\"></page-head>\r\n\t\t<view class=\"uni-padding-wrap uni-common-mt\">\r\n\t\t\t<view>\r\n\t\t\t\t本蓝牙协议只支持低功耗蓝牙协议ble。如果想连接非ble蓝牙设备，请在社区搜索 Native.js 蓝牙。\r\n\t\t\t</view>\r\n\t\t\t<view class=\"uni-btn-v\">\r\n\t\t\t\t<button type=\"primary\" :disabled=\"disabled[0]\" @click=\"openBluetoothAdapter\">\r\n\t\t\t\t\t初始化蓝牙模块\r\n\t\t\t\t</button>\r\n\t\t\t\t<view v-if=\"!adapterState.available\">\r\n\t\t\t\t\t{{ '蓝牙适配器不可用,请初始化蓝牙模块' }}\r\n\t\t\t\t</view>\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t:loading=\"searchLoad\"\r\n\t\t\t\t\t:disabled=\"disabled[1]\"\r\n\t\t\t\t\t@click=\"startBluetoothDevicesDiscovery\"\r\n\t\t\t\t>\r\n\t\t\t\t\t开始搜索蓝牙设备\r\n\t\t\t\t</button>\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t:disabled=\"disabled[2]\"\r\n\t\t\t\t\t@click=\"stopBluetoothDevicesDiscovery(false)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t停止搜索蓝牙设备\r\n\t\t\t\t</button>\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t:loading=\"newDeviceLoad\"\r\n\t\t\t\t\t:disabled=\"disabled[3]\"\r\n\t\t\t\t\t@click=\"queryDevices\"\r\n\t\t\t\t>\r\n\t\t\t\t\t选择设备\r\n\t\t\t\t</button>\r\n\t\t\t\t<view v-if=\"equipment.length > 0\">\r\n\t\t\t\t\t{{\r\n\t\t\t\t\t\t(connected ? '已连接设备' : '已选择设备') +\r\n\t\t\t\t\t\t\t' : ' +\r\n\t\t\t\t\t\t\tequipment[0].name +\r\n\t\t\t\t\t\t\t' (' +\r\n\t\t\t\t\t\t\tequipment[0].deviceId +\r\n\t\t\t\t\t\t\t')'\r\n\t\t\t\t\t}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<button type=\"primary\" :disabled=\"disabled[4]\" @click=\"createBLEConnection\">\r\n\t\t\t\t\t连接蓝牙设备\r\n\t\t\t\t</button>\r\n\t\t\t\t<button type=\"primary\" :disabled=\"disabled[5]\" @click=\"getBLEDeviceServices\">\r\n\t\t\t\t\t选择设备服务\r\n\t\t\t\t</button>\r\n\t\t\t\t<view v-if=\"servicesData.length > 0\">已选服务uuid：{{ servicesData[0].uuid }}</view>\r\n\t\t\t\t<button type=\"primary\" :disabled=\"disabled[6]\" @click=\"getBLEDeviceCharacteristics\">\r\n\t\t\t\t\t获取服务的特征值\r\n\t\t\t\t</button>\r\n\t\t\t\t<view v-if=\"characteristicsData.length > 0\">\r\n\t\t\t\t\t<view class=\"uni-list_name\">uuid:{{ characteristicsData[0].uuid }}</view>\r\n\t\t\t\t\t<view class=\"uni-list_item\">\r\n\t\t\t\t\t\t是否支持 read 操作:{{ characteristicsData[0].properties.read }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"uni-list_item\">\r\n\t\t\t\t\t\t是否支持 write 操作:{{ characteristicsData[0].properties.write }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"uni-list_item\">\r\n\t\t\t\t\t\t是否支持 notify 操作:{{ characteristicsData[0].properties.notify }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"uni-list_item\">\r\n\t\t\t\t\t\t是否支持 indicate 操作:{{ characteristicsData[0].properties.indicate }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- <button type=\"primary\" :disabled=\"disabled[7]\" @click=\"readBLECharacteristicValue\">\r\n\t\t\t\t\t读取特征值数据\r\n\t\t\t\t</button>\r\n\t\t\t\t<view v-if=\"valueChangeData.serviceId\">\r\n\t\t\t\t\t<view class=\"list-name\">\r\n\t\t\t\t\t\t特征值最新的值:{{ valueChangeData.value || '还没有最新值' }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view> -->\r\n\t\t\t\t<!-- <button type=\"primary\" :disabled=\"disabled[8]\" @click=\"w\">写入特征值数据</button> -->\r\n\t\t\t\t<button type=\"primary\" :disabled=\"disabled[9]\" @click=\"closeBLEConnection\">\r\n\t\t\t\t\t断开蓝牙设备\r\n\t\t\t\t</button>\r\n\t\t\t\t<button type=\"primary\" :disabled=\"disabled[10]\" @click=\"closeBluetoothAdapter\">\r\n\t\t\t\t\t关闭蓝牙模块\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 遮罩 -->\r\n\t\t<view v-if=\"maskShow\" class=\"uni-mask\" @touchmove.stop.prevent=\"moveHandle\" @click=\"maskclose\">\r\n\t\t\t<scroll-view class=\"uni-scroll_box\" scroll-y @touchmove.stop.prevent=\"moveHandle\" @click.stop=\"moveHandle\">\r\n\t\t\t\t<view class=\"uni-title\">\r\n\t\t\t\t\t已经发现{{ list.length }}{{ showMaskType === 'device' ? '台设备' : '个服务' }}:\r\n\t\t\t\t</view>\r\n\t\t\t\t<view\r\n\t\t\t\t\tclass=\"uni-list-box\"\r\n\t\t\t\t\tv-for=\"(item, index) in list\"\r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t@click=\"tapQuery(item)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<view v-if=\"showMaskType === 'device'\">\r\n\t\t\t\t\t\t<view class=\"uni-list_name\">{{ item.name || item.localName }}</view>\r\n\t\t\t\t\t\t<view class=\"uni-list_item\">信号强度:{{ item.RSSI }}dBm</view>\r\n\t\t\t\t\t\t<view class=\"uni-list_item\">UUID:{{ item.deviceId }}</view>\r\n\t\t\t\t\t\t<!-- <view class=\"list-item\" v-if=\"showMaskType === 'device'\">\r\n\t\t\t\t\t\t\tService数量:{{ item.advertisServiceUUIDs.length }}\r\n\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"showMaskType === 'service'\">\r\n\t\t\t\t\t\t<view class=\"uni-list_item\" style=\"line-height:2.2;\">\r\n\t\t\t\t\t\t\tUUID: {{ item.uuid }}\r\n\t\t\t\t\t\t\t<text v-if=\"showMaskType === 'service'\">\r\n\t\t\t\t\t\t\t\t{{ item.isPrimary ? '（主服务）' : '' }}\r\n\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"showMaskType === 'characteristics'\">\r\n\t\t\t\t\t\t<view class=\"uni-list_name\">uuid:{{ item.uuid }}</view>\r\n\t\t\t\t\t\t<view class=\"uni-list_item\">是否支持 read 操作:{{ item.properties.read }}</view>\r\n\t\t\t\t\t\t<view class=\"uni-list_item\">\r\n\t\t\t\t\t\t\t是否支持 write 操作:{{ item.properties.write }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"uni-list_item\">\r\n\t\t\t\t\t\t\t是否支持 notify 操作:{{ item.properties.notify }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"uni-list_item\">\r\n\t\t\t\t\t\t\t是否支持 indicate 操作:{{ item.properties.indicate }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttitle: 'bluetooth',\r\n\t\t\tdisabled: [false, true, true, true, true, true, true, true, true, true, true],\r\n\t\t\tnewDeviceLoad: false,\r\n\t\t\tsearchLoad: false,\r\n\t\t\tmaskShow: false,\r\n\t\t\tequipment: [],\r\n\t\t\tadapterState: {\r\n\t\t\t\tdiscovering: false,\r\n\t\t\t\tavailable: false\r\n\t\t\t},\r\n\t\t\tconnected: false,\r\n\t\t\tshowMaskType: 'device',\r\n\t\t\tservicesData: [],\r\n\t\t\tcharacteristicsData: [],\r\n\t\t\tvalueChangeData: {},\r\n\t\t\tisStop:true ,\r\n\t\t\tlist: []\r\n\t\t};\r\n\t},\r\n\tonLoad() {\r\n\t\tthis.onBLEConnectionStateChange();\r\n\t},\r\n\tmethods: {\r\n\t\tmoveHandle() {},\r\n\t\t/**\r\n\t\t * 关闭遮罩\r\n\t\t */\r\n\t\tmaskclose(){\r\n\t\t\tthis.maskShow = false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选择设备\r\n\t\t */\r\n\t\tqueryDevices() {\r\n\t\t\t// this.newDeviceLoad = true;\r\n\t\t\tthis.showMaskType = 'device';\r\n\t\t\tthis.maskShow = true;\r\n\t\t},\r\n\t\ttapQuery(item) {\r\n\t\t\tif (this.showMaskType === 'device') {\r\n\t\t\t\tthis.$set(this.disabled, 4, false);\r\n\t\t\t\tif (this.equipment.length > 0) {\r\n\t\t\t\t\tthis.equipment[0] = item;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.equipment.push(item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.newDeviceLoad = false;\r\n\t\t\t}\r\n\t\t\tif (this.showMaskType === 'service') {\r\n\t\t\t\tthis.$set(this.disabled, 6, false);\r\n\t\t\t\tif (this.servicesData.length > 0) {\r\n\t\t\t\t\tthis.servicesData[0] = item;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.servicesData.push(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.showMaskType === 'characteristics') {\r\n\t\t\t\tthis.$set(this.disabled, 7, false);\r\n\t\t\t\tif (this.characteristicsData.length > 0) {\r\n\t\t\t\t\tthis.characteristicsData[0] = item;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.characteristicsData.push(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.maskShow = false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化蓝牙设备\r\n\t\t */\r\n\t\topenBluetoothAdapter() {\r\n\t\t\tuni.openBluetoothAdapter({\r\n\t\t\t\tsuccess: e => {\r\n\t\t\t\t\tconsole.log('初始化蓝牙成功:' + e.errMsg);\r\n\t\t\t\t\tconsole.log(JSON.stringify(e));\r\n\t\t\t\t\tthis.isStop = false ;\r\n\t\t\t\t\tthis.$set(this.disabled, 0, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 1, false);\r\n\t\t\t\t\tthis.$set(this.disabled, 10, false);\r\n\t\t\t\t\tthis.getBluetoothAdapterState();\r\n\t\t\t\t},\r\n\t\t\t\tfail: e => {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\tconsole.log('初始化蓝牙失败，错误码：' + (e.errCode || e.errMsg));\r\n\t\t\t\t\tif (e.errCode !== 0) {\r\n\t\t\t\t\t\tinitTypes(e.errCode,e.errMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 开始搜索蓝牙设备\r\n\t\t */\r\n\t\tstartBluetoothDevicesDiscovery() {\r\n\t\t\tuni.startBluetoothDevicesDiscovery({\r\n\t\t\t\tsuccess: e => {\r\n\t\t\t\t\tconsole.log('开始搜索蓝牙设备:' + e.errMsg);\r\n\t\t\t\t\tthis.searchLoad = true;\r\n\t\t\t\t\tthis.$set(this.disabled, 1, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 2, false);\r\n\t\t\t\t\tthis.$set(this.disabled, 3, false);\r\n\t\t\t\t\tthis.onBluetoothDeviceFound();\r\n\t\t\t\t},\r\n\t\t\t\tfail: e => {\r\n\t\t\t\t\tconsole.log('搜索蓝牙设备失败，错误码：' + e.errCode);\r\n\t\t\t\t\tif (e.errCode !== 0) {\r\n\t\t\t\t\t\tinitTypes(e.errCode);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 停止搜索蓝牙设备\r\n\t\t */\r\n\t\tstopBluetoothDevicesDiscovery(types) {\r\n\t\t\tuni.stopBluetoothDevicesDiscovery({\r\n\t\t\t\tsuccess: e => {\r\n\t\t\t\t\tconsole.log('停止搜索蓝牙设备:' + e.errMsg);\r\n\t\t\t\t\tif (types) {\r\n\t\t\t\t\t\tthis.$set(this.disabled, 1, true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$set(this.disabled, 1, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$set(this.disabled, 2, true);\r\n\t\t\t\t\t// this.$set(this.disabled, 3, true);\r\n\t\t\t\t\tthis.searchLoad = false;\r\n\t\t\t\t},\r\n\t\t\t\tfail: e => {\r\n\t\t\t\t\tconsole.log('停止搜索蓝牙设备失败，错误码：' + e.errCode);\r\n\t\t\t\t\tif (e.errCode !== 0) {\r\n\t\t\t\t\t\tinitTypes(e.errCode);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 发现外围设备\r\n\t\t */\r\n\t\tonBluetoothDeviceFound() {\r\n\t\t\tuni.onBluetoothDeviceFound(devices => {\r\n\t\t\t\tconsole.log('开始监听寻找到新设备的事件');\r\n\t\t\t\t// this.$set(this.disabled, 3, false);\r\n\t\t\t\tthis.getBluetoothDevices();\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取在蓝牙模块生效期间所有已发现的蓝牙设备。包括已经和本机处于连接状态的设备。\r\n\t\t */\r\n\t\tgetBluetoothDevices() {\r\n\t\t\tuni.getBluetoothDevices({\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tthis.newDeviceLoad = false;\r\n\t\t\t\t\tconsole.log('获取蓝牙设备成功:' + res.errMsg);\r\n\t\t\t\t\t// console.log(JSON.stringify(res))\r\n\t\t\t\t\tthis.list = res.devices;\r\n\t\t\t\t},\r\n\t\t\t\tfail: e => {\r\n\t\t\t\t\tconsole.log('获取蓝牙设备错误，错误码：' + e.errCode);\r\n\t\t\t\t\tif (e.errCode !== 0) {\r\n\t\t\t\t\t\tinitTypes(e.errCode);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取本机蓝牙适配器状态\r\n\t\t */\r\n\t\tgetBluetoothAdapterState() {\r\n\t\t\tconsole.log('--->');\r\n\t\t\tuni.getBluetoothAdapterState({\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tconsole.log(JSON.stringify(res));\r\n\t\t\t\t\tthis.adapterState = res;\r\n\t\t\t\t},\r\n\t\t\t\tfail: e => {\r\n\t\t\t\t\tconsole.log('获取本机蓝牙适配器状态失败，错误码：' + e.errCode);\r\n\t\t\t\t\tif (e.errCode !== 0) {\r\n\t\t\t\t\t\tinitTypes(e.errCode);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 连接低功耗蓝牙\r\n\t\t */\r\n\t\tcreateBLEConnection() {\r\n\t\t\tlet deviceId = this.equipment[0].deviceId;\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '连接蓝牙...',\r\n\t\t\t\ticon: 'loading',\r\n\t\t\t\tduration: 99999\r\n\t\t\t});\r\n\t\t\tuni.createBLEConnection({\r\n\t\t\t\t// 这里的 deviceId 需要已经通过 createBLEConnection 与对应设备建立链接\r\n\t\t\t\tdeviceId,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tconsole.log('连接蓝牙成功:' + res.errMsg);\r\n\t\t\t\t\t// 连接设备后断开搜索 并且不能搜索设备\r\n\t\t\t\t\tthis.stopBluetoothDevicesDiscovery(true);\r\n\t\t\t\t\tuni.hideToast();\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '连接成功',\r\n\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.$set(this.disabled, 3, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 4, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 5, false);\r\n\t\t\t\t\tthis.$set(this.disabled, 9, false);\r\n\t\t\t\t\tthis.connected = true;\r\n\t\t\t\t},\r\n\t\t\t\tfail: e => {\r\n\t\t\t\t\tconsole.log('连接低功耗蓝牙失败，错误码：' + e.errCode);\r\n\t\t\t\t\tif (e.errCode !== 0) {\r\n\t\t\t\t\t\tinitTypes(e.errCode);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 断开与低功耗蓝牙设备的连接\r\n\t\t */\r\n\t\tcloseBLEConnection() {\r\n\t\t\tlet deviceId = this.equipment[0].deviceId;\r\n\t\t\tuni.closeBLEConnection({\r\n\t\t\t\tdeviceId,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tconsole.log('断开低功耗蓝牙成功:' + res.errMsg);\r\n\t\t\t\t\tthis.$set(this.disabled, 1, false);\r\n\t\t\t\t\tthis.$set(this.disabled, 3, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 4, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 5, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 6, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 7, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 8, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 9, true);\r\n\t\t\t\t\tthis.equipment = [];\r\n\t\t\t\t\tthis.servicesData = [];\r\n\t\t\t\t\tthis.characteristicsData = [];\r\n\t\t\t\t},\r\n\t\t\t\tfail: e => {\r\n\t\t\t\t\tconsole.log('断开低功耗蓝牙成功，错误码：' + e.errCode);\r\n\t\t\t\t\tif (e.errCode !== 0) {\r\n\t\t\t\t\t\tinitTypes(e.errCode);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取所有服务\r\n\t\t */\r\n\t\tgetBLEDeviceServices() {\r\n\t\t\tlet deviceId = this.equipment[0].deviceId;\r\n\t\t\tconsole.log('获取所有服务的 uuid:' + deviceId);\r\n\r\n\t\t\tuni.getBLEDeviceServices({\r\n\t\t\t\t// 这里的 deviceId 需要已经通过 createBLEConnection 与对应设备建立链接\r\n\t\t\t\tdeviceId,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tconsole.log(JSON.stringify(res.services));\r\n\t\t\t\t\tconsole.log('获取设备服务成功:' + res.errMsg);\r\n\t\t\t\t\tthis.$set(this.disabled, 7, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 8, true);\r\n\t\t\t\t\tthis.showMaskType = 'service';\r\n\t\t\t\t\tthis.list = res.services;\r\n\r\n\t\t\t\t\tthis.characteristicsData = [];\r\n\t\t\t\t\tif (this.list.length <= 0) {\r\n\t\t\t\t\t\ttoast('获取服务失败，请重试!');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.maskShow = true;\r\n\t\t\t\t},\r\n\t\t\t\tfail: e => {\r\n\t\t\t\t\tconsole.log('获取设备服务失败，错误码：' + e.errCode);\r\n\t\t\t\t\tif (e.errCode !== 0) {\r\n\t\t\t\t\t\tinitTypes(e.errCode);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取某个服务下的所有特征值\r\n\t\t */\r\n\t\tgetBLEDeviceCharacteristics() {\r\n\t\t\tlet deviceId = this.equipment[0].deviceId;\r\n\t\t\tlet serviceId = this.servicesData[0].uuid;\r\n\t\t\tconsole.log(deviceId);\r\n\t\t\tconsole.log(serviceId);\r\n\t\t\tuni.getBLEDeviceCharacteristics({\r\n\t\t\t\t// 这里的 deviceId 需要已经通过 createBLEConnection 与对应设备建立链接\r\n\t\t\t\tdeviceId,\r\n\t\t\t\t// 这里的 serviceId 需要在 getBLEDeviceServices 接口中获取\r\n\t\t\t\tserviceId,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tconsole.log(JSON.stringify(res));\r\n\t\t\t\t\tconsole.log('获取特征值成功:' + res.errMsg);\r\n\t\t\t\t\tthis.$set(this.disabled, 7, true);\r\n\t\t\t\t\tthis.valueChangeData = {};\r\n\t\t\t\t\tthis.showMaskType = 'characteristics';\r\n\t\t\t\t\tthis.list = res.characteristics;\r\n\t\t\t\t\tif (this.list.length <= 0) {\r\n\t\t\t\t\t\ttoast('获取特征值失败，请重试!');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.maskShow = true;\r\n\t\t\t\t},\r\n\t\t\t\tfail: e => {\r\n\t\t\t\t\tconsole.log('获取特征值失败，错误码：' + e.errCode);\r\n\t\t\t\t\tif (e.errCode !== 0) {\r\n\t\t\t\t\t\tinitTypes(e.errCode);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 监听低功耗蓝牙连接状态的改变事件。包括开发者主动连接或断开连接，设备丢失，连接异常断开等等\r\n\t\t */\r\n\t\tonBLEConnectionStateChange() {\r\n\t\t\tuni.onBLEConnectionStateChange(res => {\r\n\t\t\t\t// 该方法回调中可以用于处理连接意外断开等异常情况\r\n\t\t\t\tconsole.log(`蓝牙连接状态 -------------------------->`);\r\n\t\t\t\tconsole.log(JSON.stringify(res));\r\n\t\t\t\tif (!res.connected) {\r\n\t\t\t\t\tif(this.isStop) return ;\r\n\t\t\t\t\tconsole.log('断开低功耗蓝牙成功:');\r\n\t\t\t\t\tthis.$set(this.disabled, 1, false);\r\n\t\t\t\t\tthis.$set(this.disabled, 3, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 4, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 5, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 6, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 7, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 8, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 9, true);\r\n\t\t\t\t\tthis.searchLoad = false;\r\n\t\t\t\t\tthis.equipment = [];\r\n\t\t\t\t\tthis.servicesData = [];\r\n\t\t\t\t\tthis.characteristicsData = [];\r\n\t\t\t\t\tthis.valueChangeData = {};\r\n\t\t\t\t\ttoast('已经断开当前蓝牙连接');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 读取低功耗蓝牙设备的特征值的二进制数据值。注意：必须设备的特征值支持 read 才可以成功调用\r\n\t\t */\r\n\t\treadBLECharacteristicValue() {\r\n\t\t\tlet deviceId = this.equipment[0].deviceId;\r\n\t\t\tlet serviceId = this.servicesData[0].uuid;\r\n\t\t\tlet characteristicId = this.characteristicsData[0].uuid;\r\n\t\t\tconsole.log(deviceId);\r\n\t\t\tconsole.log(serviceId);\r\n\t\t\tconsole.log(characteristicId);\r\n\t\t\tuni.readBLECharacteristicValue({\r\n\t\t\t\t// 这里的 deviceId 需要已经通过 createBLEConnection 与对应设备建立链接\r\n\t\t\t\tdeviceId,\r\n\t\t\t\t// 这里的 serviceId 需要在 getBLEDeviceServices 接口中获取\r\n\t\t\t\tserviceId,\r\n\t\t\t\t// 这里的 characteristicId 需要在 getBLEDeviceCharacteristics 接口中获取\r\n\t\t\t\tcharacteristicId,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tconsole.log('读取设备数据值成功');\r\n\t\t\t\t\tconsole.log(JSON.stringify(res));\r\n\t\t\t\t\tthis.notifyBLECharacteristicValueChange();\r\n\t\t\t\t},\r\n\t\t\t\tfail(e) {\r\n\t\t\t\t\tconsole.log('读取设备数据值失败，错误码：' + e.errCode);\r\n\t\t\t\t\tif (e.errCode !== 0) {\r\n\t\t\t\t\t\tinitTypes(e.errCode);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.onBLECharacteristicValueChange();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 监听低功耗蓝牙设备的特征值变化事件。必须先启用 notifyBLECharacteristicValueChange 接口才能接收到设备推送的 notification。\r\n\t\t */\r\n\t\tonBLECharacteristicValueChange() {\r\n\t\t\t// 必须在这里的回调才能获取\r\n\t\t\tuni.onBLECharacteristicValueChange(characteristic => {\r\n\t\t\t\tconsole.log('监听低功耗蓝牙设备的特征值变化事件成功');\r\n\t\t\t\tconsole.log(JSON.stringify(characteristic));\r\n\t\t\t\tthis.valueChangeData = characteristic;\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 订阅操作成功后需要设备主动更新特征值的 value，才会触发 uni.onBLECharacteristicValueChange 回调。\r\n\t\t */\r\n\t\tnotifyBLECharacteristicValueChange() {\r\n\t\t\tlet deviceId = this.equipment[0].deviceId;\r\n\t\t\tlet serviceId = this.servicesData[0].uuid;\r\n\t\t\tlet characteristicId = this.characteristicsData[0].uuid;\r\n\t\t\tlet notify = this.characteristicsData[0].properties.notify;\r\n\t\t\tconsole.log(deviceId);\r\n\t\t\tconsole.log(serviceId);\r\n\t\t\tconsole.log(characteristicId);\r\n\t\t\tconsole.log(notify);\r\n\t\t\tuni.notifyBLECharacteristicValueChange({\r\n\t\t\t\tstate: true, // 启用 notify 功能\r\n\t\t\t\t// 这里的 deviceId 需要已经通过 createBLEConnection 与对应设备建立链接\r\n\t\t\t\tdeviceId,\r\n\t\t\t\t// 这里的 serviceId 需要在 getBLEDeviceServices 接口中获取\r\n\t\t\t\tserviceId,\r\n\t\t\t\t// 这里的 characteristicId 需要在 getBLEDeviceCharacteristics 接口中获取\r\n\t\t\t\tcharacteristicId,\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tconsole.log('notifyBLECharacteristicValueChange success:' + res.errMsg);\r\n\t\t\t\t\tconsole.log(JSON.stringify(res));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * \t断开蓝牙模块\r\n\t\t */\r\n\t\tcloseBluetoothAdapter(OBJECT) {\r\n\t\t\tuni.closeBluetoothAdapter({\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tconsole.log('断开蓝牙模块成功');\r\n\t\t\t\t\tthis.isStop = true ;\r\n\t\t\t\t\tthis.$set(this.disabled, 0, false);\r\n\t\t\t\t\tthis.$set(this.disabled, 1, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 2, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 3, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 4, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 5, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 6, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 7, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 8, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 9, true);\r\n\t\t\t\t\tthis.$set(this.disabled, 10, true);\r\n\t\t\t\t\tthis.equipment = [];\r\n\t\t\t\t\tthis.servicesData = [];\r\n\t\t\t\t\tthis.characteristicsData = [];\r\n\t\t\t\t\tthis.valueChangeData = {};\r\n\t\t\t\t\tthis.adapterState = [];\r\n\t\t\t\t\tthis.searchLoad =false;\r\n\t\t\t\t\ttoast('断开蓝牙模块');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * 判断初始化蓝牙状态\r\n */\r\nfunction initTypes(code, errMsg) {\r\n\tswitch (code) {\r\n\t\tcase 10000:\r\n\t\t\ttoast('未初始化蓝牙适配器');\r\n\t\t\tbreak;\r\n\t\tcase 10001:\r\n\t\t\ttoast('未检测到蓝牙，请打开蓝牙重试！');\r\n\t\t\tbreak;\r\n\t\tcase 10002:\r\n\t\t\ttoast('没有找到指定设备');\r\n\t\t\tbreak;\r\n\t\tcase 10003:\r\n\t\t\ttoast('连接失败');\r\n\t\t\tbreak;\r\n\t\tcase 10004:\r\n\t\t\ttoast('没有找到指定服务');\r\n\t\t\tbreak;\r\n\t\tcase 10005:\r\n\t\t\ttoast('没有找到指定特征值');\r\n\t\t\tbreak;\r\n\t\tcase 10006:\r\n\t\t\ttoast('当前连接已断开');\r\n\t\t\tbreak;\r\n\t\tcase 10007:\r\n\t\t\ttoast('当前特征值不支持此操作');\r\n\t\t\tbreak;\r\n\t\tcase 10008:\r\n\t\t\ttoast('其余所有系统上报的异常');\r\n\t\t\tbreak;\r\n\t\tcase 10009:\r\n\t\t\ttoast('Android 系统特有，系统版本低于 4.3 不支持 BLE');\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\ttoast(errMsg);\r\n\t}\r\n}\r\n\r\n/**\r\n * 弹出框封装\r\n */\r\nfunction toast(content, showCancel = false) {\r\n\tuni.showModal({\r\n\t\ttitle: '提示',\r\n\t\tcontent,\r\n\t\tshowCancel\r\n\t});\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n.uni-title {\r\n\t/* width: 100%; */\r\n\t/* height: 80rpx; */\r\n\ttext-align: center;\r\n}\r\n\r\n.uni-mask {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tbottom: 0;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\twidth: 100%;\r\n\tbackground: rgba(0, 0, 0, 0.6);\r\n\tpadding: 0 30rpx;\r\n\tbox-sizing: border-box;\r\n}\r\n\r\n.uni-scroll_box {\r\n\theight: 70%;\r\n\tbackground: #fff;\r\n\tborder-radius: 20rpx;\r\n}\r\n.uni-list-box {\r\n\tmargin: 0 20rpx;\r\n\tpadding: 15rpx 0;\r\n\tborder-bottom: 1px #f5f5f5 solid;\r\n\tbox-sizing: border-box;\r\n}\r\n.uni-list:last-child {\r\n\tborder: none;\r\n}\r\n.uni-list_name {\r\n\tfont-size: 30rpx;\r\n\tcolor: #333;\r\n}\r\n.uni-list_item {\r\n\tfont-size: 24rpx;\r\n\tcolor: #555;\r\n\tline-height: 1.5;\r\n}\r\n\r\n.uni-success_box {\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\tbottom: 0;\r\n\tmin-height: 100rpx;\r\n\twidth: 100%;\r\n\tbackground: #fff;\r\n\tbox-sizing: border-box;\r\n\tborder-top: 1px #eee solid;\r\n}\r\n.uni-success_sub {\r\n\t/* width: 100%%; */\r\n\theight: 100rpx;\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tpadding: 0 30rpx;\r\n}\r\n.uni-close_button {\r\n\tpadding: 0 20rpx;\r\n\theight: 60rpx;\r\n\tline-height: 60rpx;\r\n\tbackground: #ce3c39;\r\n\tcolor: #ffffff;\r\n\tborder-radius: 10rpx;\r\n}\r\n.uni-success_content {\r\n\theight: 600rpx;\r\n\tmargin: 30rpx;\r\n\tmargin-top: 0;\r\n\tborder: 1px #eee solid;\r\n\tpadding: 30rpx;\r\n}\r\n.uni-content_list {\r\n\tpadding-bottom: 10rpx;\r\n\tborder-bottom: 1px #f5f5f5 solid;\r\n}\r\n.uni-tips {\r\n\ttext-align: center;\r\n\tfont-size: 24rpx;\r\n\tcolor: #666;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/workspace/2025/wx/wx20250829/天天体验馆/pages/API/bluetooth/bluetooth.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}