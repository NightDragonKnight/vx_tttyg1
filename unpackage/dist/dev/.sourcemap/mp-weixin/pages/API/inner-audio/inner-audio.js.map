{"version":3,"file":"inner-audio.js","sources":["pages/API/inner-audio/inner-audio.vue","../../../../../Work-Tools/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcQVBJXGlubmVyLWF1ZGlvXGlubmVyLWF1ZGlvLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"uni-padding-wrap\">\r\n\t\t<page-head title=\"audio\"></page-head>\r\n\t\t<view class=\"uni-common-mt\">\r\n\t\t\t<slider :value=\"position\" :min=\"0\" :max=\"duration\" @changing=\"onchanging\" @change=\"onchange\"></slider>\r\n\t\t</view>\r\n\t\t<!-- <view class=\"uni-common-mt play-time-area\">\r\n\t\t\t<text class=\"current-time\">{{currentTime}}</text>\r\n\t\t\t<text class=\"duration\">{{duration}}</text>\r\n\t\t</view> -->\r\n\t\t<view class=\"play-button-area\">\r\n\t\t\t<image class=\"icon-play\" :src=\"playImage\" @click=\"play\"></image>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\tconst audioUrl = 'https://web-ext-storage.dcloud.net.cn/uni-app/ForElise.mp3'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: \"innerAudioContext\",\r\n\t\t\t\tisPlaying: false,\r\n\t\t\t\tisPlayEnd: false,\r\n\t\t\t\tcurrentTime: 0,\r\n\t\t\t\tduration: 100\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tposition() {\r\n\t\t\t\treturn this.isPlayEnd ? 0 : this.currentTime;\r\n\t\t\t},\r\n\t\t\tplayImage() {\r\n\t\t\t\treturn this.isPlaying ? \"/static/pause.png\" : \"/static/play.png\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis._isChanging = false;\r\n\t\t\tthis._audioContext = null;\r\n\t\t\tthis.createAudio();\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tif (this._audioContext != null && this.isPlaying) {\r\n\t\t\t\tthis.stop();\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tcreateAudio() {\r\n\t\t\t\tvar innerAudioContext = this._audioContext = uni.createInnerAudioContext();\r\n\t\t\t\tinnerAudioContext.autoplay = false;\r\n\t\t\t\tinnerAudioContext.src = audioUrl;\r\n\t\t\t\tinnerAudioContext.onPlay(() => {\r\n\t\t\t\t\tconsole.log('开始播放');\r\n\t\t\t\t});\r\n\t\t\t\tinnerAudioContext.onTimeUpdate((e) => {\r\n\t\t\t\t\tif (this._isChanging === true) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.currentTime = innerAudioContext.currentTime || 0;\r\n\t\t\t\t\tthis.duration = innerAudioContext.duration || 0;\r\n\t\t\t\t});\r\n\t\t\t\tinnerAudioContext.onEnded(() => {\r\n\t\t\t\t\tthis.currentTime = 0;\r\n\t\t\t\t\tthis.isPlaying = false;\r\n\t\t\t\t\tthis.isPlayEnd = true;\r\n\t\t\t\t});\r\n\t\t\t\tinnerAudioContext.onError((res) => {\r\n\t\t\t\t\tthis.isPlaying = false;\r\n\t\t\t\t\tconsole.log(res.errMsg);\r\n\t\t\t\t\tconsole.log(res.errCode);\r\n\t\t\t\t});\r\n\t\t\t\treturn innerAudioContext;\r\n\t\t\t},\r\n\t\t\tonchanging() {\r\n\t\t\t\tthis._isChanging = true;\r\n\t\t\t},\r\n\t\t\tonchange(e) {\r\n\t\t\t\tconsole.log(e.detail.value);\r\n\t\t\t\tconsole.log(typeof e.detail.value);\r\n\t\t\t\tthis._audioContext.seek(e.detail.value);\r\n\t\t\t\tthis._isChanging = false;\r\n\t\t\t},\r\n\t\t\tplay() {\r\n\t\t\t\tif (this.isPlaying) {\r\n\t\t\t\t\tthis.pause();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.isPlaying = true;\r\n\t\t\t\tthis._audioContext.play();\r\n\t\t\t\tthis.isPlayEnd = false;\r\n\t\t\t},\r\n\t\t\tpause() {\r\n\t\t\t\tthis._audioContext.pause();\r\n\t\t\t\tthis.isPlaying = false;\r\n\t\t\t},\r\n\t\t\tstop() {\r\n\t\t\t\tthis._audioContext.stop();\r\n\t\t\t\tthis.isPlaying = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<style>\r\n\t.play-time-area {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tmargin-top: 20px;\r\n\t}\r\n\r\n\t.duration {\r\n\t\tmargin-left: auto;\r\n\t}\r\n\r\n\t.play-button-area {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: center;\r\n\t\tmargin-top: 50px;\r\n\t}\r\n\r\n\t.icon-play {\r\n\t\twidth: 60px;\r\n\t\theight: 60px;\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'D:/workspace/2025/wx/wx20250829/天天体验馆/pages/API/inner-audio/inner-audio.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAgBC,MAAM,WAAW;AACjB,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,OAAO;AAAA,MACP,WAAW;AAAA,MACX,WAAW;AAAA,MACX,aAAa;AAAA,MACb,UAAU;AAAA,IACX;AAAA,EACA;AAAA,EACD,UAAU;AAAA,IACT,WAAW;AACV,aAAO,KAAK,YAAY,IAAI,KAAK;AAAA,IACjC;AAAA,IACD,YAAY;AACX,aAAO,KAAK,YAAY,sBAAsB;AAAA,IAC/C;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,cAAc;AACnB,SAAK,gBAAgB;AACrB,SAAK,YAAW;AAAA,EAChB;AAAA,EACD,WAAW;AACV,QAAI,KAAK,iBAAiB,QAAQ,KAAK,WAAW;AACjD,WAAK,KAAI;AAAA,IACV;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,cAAc;AACb,UAAI,oBAAoB,KAAK,gBAAgBA,cAAG,MAAC,wBAAuB;AACxE,wBAAkB,WAAW;AAC7B,wBAAkB,MAAM;AACxB,wBAAkB,OAAO,MAAM;AAC9BA,sBAAAA,MAAY,MAAA,OAAA,+CAAA,MAAM;AAAA,MACnB,CAAC;AACD,wBAAkB,aAAa,CAAC,MAAM;AACrC,YAAI,KAAK,gBAAgB,MAAM;AAC9B;AAAA,QACD;AACA,aAAK,cAAc,kBAAkB,eAAe;AACpD,aAAK,WAAW,kBAAkB,YAAY;AAAA,MAC/C,CAAC;AACD,wBAAkB,QAAQ,MAAM;AAC/B,aAAK,cAAc;AACnB,aAAK,YAAY;AACjB,aAAK,YAAY;AAAA,MAClB,CAAC;AACD,wBAAkB,QAAQ,CAAC,QAAQ;AAClC,aAAK,YAAY;AACjBA,sBAAA,MAAA,MAAA,OAAA,+CAAY,IAAI,MAAM;AACtBA,sBAAY,MAAA,MAAA,OAAA,+CAAA,IAAI,OAAO;AAAA,MACxB,CAAC;AACD,aAAO;AAAA,IACP;AAAA,IACD,aAAa;AACZ,WAAK,cAAc;AAAA,IACnB;AAAA,IACD,SAAS,GAAG;AACXA,oBAAA,MAAA,MAAA,OAAA,+CAAY,EAAE,OAAO,KAAK;AAC1BA,oBAAY,MAAA,MAAA,OAAA,+CAAA,OAAO,EAAE,OAAO,KAAK;AACjC,WAAK,cAAc,KAAK,EAAE,OAAO,KAAK;AACtC,WAAK,cAAc;AAAA,IACnB;AAAA,IACD,OAAO;AACN,UAAI,KAAK,WAAW;AACnB,aAAK,MAAK;AACV;AAAA,MACD;AACA,WAAK,YAAY;AACjB,WAAK,cAAc;AACnB,WAAK,YAAY;AAAA,IACjB;AAAA,IACD,QAAQ;AACP,WAAK,cAAc;AACnB,WAAK,YAAY;AAAA,IACjB;AAAA,IACD,OAAO;AACN,WAAK,cAAc;AACnB,WAAK,YAAY;AAAA,IAClB;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;AClGD,GAAG,WAAW,eAAe;"}