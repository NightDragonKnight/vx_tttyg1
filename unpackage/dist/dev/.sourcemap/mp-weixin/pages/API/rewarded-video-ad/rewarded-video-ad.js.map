{"version":3,"file":"rewarded-video-ad.js","sources":["pages/API/rewarded-video-ad/rewarded-video-ad.vue","../../../../../Work-Tools/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcQVBJXHJld2FyZGVkLXZpZGVvLWFkXHJld2FyZGVkLXZpZGVvLWFkLnZ1ZQ"],"sourcesContent":["<template>\r\n    <view>\r\n        <page-head :title=\"title\"></page-head>\r\n        <view class=\"uni-padding-wrap uni-common-mt\">\r\n            <button v-if=\"!loadError\" :loading=\"loading\" :disabled=\"loading\" type=\"primary\" class=\"btn\" @click=\"show\">显示广告</button>\r\n            <button v-if=\"loadError\" :loading=\"loading\" :disabled=\"loading\" type=\"primary\" class=\"btn\" @click=\"reloadAd\">重新加载广告</button>\r\n        </view>\r\n        <!-- #ifndef APP-PLUS -->\r\n        <view class=\"ad-tips\">\r\n            <text>小程序端的广告ID由小程序平台提供</text>\r\n        </view>\r\n        <!-- #endif -->\r\n    </view>\r\n</template>\r\n\r\n<script>\r\n    const ERROR_CODE = [-5001, -5002, -5003, -5004, -5005, -5006];\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                title: '激励视频广告',\r\n                loading: false,\r\n                loadError: false\r\n            }\r\n        },\r\n        onReady() {\r\n            // #ifdef APP-PLUS\r\n            this.adOption = {\r\n                adpid: '1507000689'\r\n            };\r\n            // #endif\r\n            // #ifdef MP-WEIXIN\r\n            this.adOption = {\r\n                adUnitId: ''\r\n            };\r\n            // #endif\r\n            this.createAd();\r\n        },\r\n        methods: {\r\n            createAd() {\r\n                var rewardedVideoAd = this.rewardedVideoAd = uni.createRewardedVideoAd(this.adOption);\r\n                rewardedVideoAd.onLoad(() => {\r\n                    this.loading = false;\r\n                    this.loadError = false;\r\n                    console.log('onLoad event')\r\n                });\r\n                rewardedVideoAd.onClose((res) => {\r\n                    this.loading = true;\r\n                    // 用户点击了【关闭广告】按钮\r\n                    if (res && res.isEnded) {\r\n                        // 正常播放结束\r\n                        console.log(\"onClose \" + res.isEnded);\r\n                    } else {\r\n                        // 播放中途退出\r\n                        console.log(\"onClose \" + res.isEnded);\r\n                    }\r\n\r\n                    setTimeout(() => {\r\n                        uni.showToast({\r\n                            title: \"激励视频\" + (res.isEnded ? \"成功\" : \"未\") + \"播放完毕\",\r\n                            duration: 10000,\r\n                            position: 'bottom'\r\n                        })\r\n                    }, 500)\r\n                });\r\n                rewardedVideoAd.onError((err) => {\r\n                    this.loading = false;\r\n                    if (err.code && ERROR_CODE.indexOf(err.code) !== -1) {\r\n                        this.loadError = true;\r\n                    }\r\n                    console.log('onError event', err)\r\n                });\r\n                this.loading = true;\r\n            },\r\n            show() {\r\n                const rewardedVideoAd = this.rewardedVideoAd;\r\n                rewardedVideoAd.show().catch(() => {\r\n                    rewardedVideoAd.load()\r\n                        .then(() => rewardedVideoAd.show())\r\n                        .catch(err => {\r\n                            console.log('激励视频 广告显示失败', err)\r\n                            uni.showToast({\r\n                                title: err.errMsg || err.message,\r\n                                duration: 5000,\r\n                                position: 'bottom'\r\n                            })\r\n                        })\r\n                })\r\n            },\r\n            reloadAd() {\r\n                this.loading = true;\r\n                this.rewardedVideoAd.load();\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .btn {\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    .ad-tips {\r\n        color: #999;\r\n        padding: 30px 0;\r\n        text-align: center;\r\n    }\r\n</style>\r\n","import MiniProgramPage from 'D:/workspace/2025/wx/wx20250829/天天体验馆/pages/API/rewarded-video-ad/rewarded-video-ad.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAgBI,MAAM,aAAa,CAAC,OAAO,OAAO,OAAO,OAAO,OAAO,KAAK;AAE5D,MAAK,YAAU;AAAA,EACX,OAAO;AACH,WAAO;AAAA,MACH,OAAO;AAAA,MACP,SAAS;AAAA,MACT,WAAW;AAAA,IACf;AAAA,EACH;AAAA,EACD,UAAU;AAON,SAAK,WAAW;AAAA,MACZ,UAAU;AAAA;AAGd,SAAK,SAAQ;AAAA,EAChB;AAAA,EACD,SAAS;AAAA,IACL,WAAW;AACP,UAAI,kBAAkB,KAAK,kBAAkBA,cAAG,MAAC,sBAAsB,KAAK,QAAQ;AACpF,sBAAgB,OAAO,MAAM;AACzB,aAAK,UAAU;AACf,aAAK,YAAY;AACjBA,sBAAAA,8EAAY,cAAc;AAAA,MAC9B,CAAC;AACD,sBAAgB,QAAQ,CAAC,QAAQ;AAC7B,aAAK,UAAU;AAEf,YAAI,OAAO,IAAI,SAAS;AAEpBA,wBAAY,MAAA,MAAA,OAAA,2DAAA,aAAa,IAAI,OAAO;AAAA,eACjC;AAEHA,wBAAY,MAAA,MAAA,OAAA,2DAAA,aAAa,IAAI,OAAO;AAAA,QACxC;AAEA,mBAAW,MAAM;AACbA,wBAAAA,MAAI,UAAU;AAAA,YACV,OAAO,UAAU,IAAI,UAAU,OAAO,OAAO;AAAA,YAC7C,UAAU;AAAA,YACV,UAAU;AAAA,WACb;AAAA,QACJ,GAAE,GAAG;AAAA,MACV,CAAC;AACD,sBAAgB,QAAQ,CAAC,QAAQ;AAC7B,aAAK,UAAU;AACf,YAAI,IAAI,QAAQ,WAAW,QAAQ,IAAI,IAAI,MAAM,IAAI;AACjD,eAAK,YAAY;AAAA,QACrB;AACAA,sBAAAA,MAAA,MAAA,OAAA,2DAAY,iBAAiB,GAAG;AAAA,MACpC,CAAC;AACD,WAAK,UAAU;AAAA,IAClB;AAAA,IACD,OAAO;AACH,YAAM,kBAAkB,KAAK;AAC7B,sBAAgB,OAAO,MAAM,MAAM;AAC/B,wBAAgB,KAAK,EAChB,KAAK,MAAM,gBAAgB,MAAM,EACjC,MAAM,SAAO;AACVA,wBAAAA,MAAY,MAAA,OAAA,2DAAA,eAAe,GAAG;AAC9BA,wBAAAA,MAAI,UAAU;AAAA,YACV,OAAO,IAAI,UAAU,IAAI;AAAA,YACzB,UAAU;AAAA,YACV,UAAU;AAAA,WACb;AAAA,SACJ;AAAA,OACR;AAAA,IACJ;AAAA,IACD,WAAW;AACP,WAAK,UAAU;AACf,WAAK,gBAAgB;IACzB;AAAA,EACJ;AACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9FJ,GAAG,WAAW,eAAe;"}