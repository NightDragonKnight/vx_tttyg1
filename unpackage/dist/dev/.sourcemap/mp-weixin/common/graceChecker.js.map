{"version":3,"file":"graceChecker.js","sources":["common/graceChecker.js"],"sourcesContent":["/**\r\n数据验证（表单验证）\r\n来自 grace.hcoder.net \r\n作者 hcoder 深海\r\n*/\r\nexport default {\r\n\terror:'',\r\n\tcheck : function (data, rule){\r\n\t\tfor(var i = 0; i < rule.length; i++){\r\n\t\t\tif (!rule[i].checkType){return true;}\r\n\t\t\tif (!rule[i].name) {return true;}\r\n\t\t\tif (!rule[i].errorMsg) {return true;}\r\n\t\t\tif (!data[rule[i].name]) {this.error = rule[i].errorMsg; return false;}\r\n\t\t\tswitch (rule[i].checkType){\r\n\t\t\t\tcase 'string':\r\n\t\t\t\t\tvar reg = new RegExp('^.{' + rule[i].checkRule + '}$');\r\n\t\t\t\t\tif(!reg.test(data[rule[i].name])) {this.error = rule[i].errorMsg; return false;}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'int':\r\n\t\t\t\t\tvar reg = new RegExp('^(-[1-9]|[1-9])[0-9]{' + rule[i].checkRule + '}$');\r\n\t\t\t\t\tif(!reg.test(data[rule[i].name])) {this.error = rule[i].errorMsg; return false;}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'between':\r\n\t\t\t\t\tif (!this.isNumber(data[rule[i].name])){\r\n\t\t\t\t\t\tthis.error = rule[i].errorMsg;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar minMax = rule[i].checkRule.split(',');\r\n\t\t\t\t\tminMax[0] = Number(minMax[0]);\r\n\t\t\t\t\tminMax[1] = Number(minMax[1]);\r\n\t\t\t\t\tif (data[rule[i].name] > minMax[1] || data[rule[i].name] < minMax[0]) {\r\n\t\t\t\t\t\tthis.error = rule[i].errorMsg;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'betweenD':\r\n\t\t\t\t\tvar reg = /^-?[1-9][0-9]?$/;\r\n\t\t\t\t\tif (!reg.test(data[rule[i].name])) { this.error = rule[i].errorMsg; return false; }\r\n\t\t\t\t\tvar minMax = rule[i].checkRule.split(',');\r\n\t\t\t\t\tminMax[0] = Number(minMax[0]);\r\n\t\t\t\t\tminMax[1] = Number(minMax[1]);\r\n\t\t\t\t\tif (data[rule[i].name] > minMax[1] || data[rule[i].name] < minMax[0]) {\r\n\t\t\t\t\t\tthis.error = rule[i].errorMsg;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'betweenF': \r\n\t\t\t\t\tvar reg = /^-?[0-9][0-9]?.+[0-9]+$/;\r\n\t\t\t\t\tif (!reg.test(data[rule[i].name])){this.error = rule[i].errorMsg; return false;}\r\n\t\t\t\t\tvar minMax = rule[i].checkRule.split(',');\r\n\t\t\t\t\tminMax[0] = Number(minMax[0]);\r\n\t\t\t\t\tminMax[1] = Number(minMax[1]);\r\n\t\t\t\t\tif (data[rule[i].name] > minMax[1] || data[rule[i].name] < minMax[0]) {\r\n\t\t\t\t\t\tthis.error = rule[i].errorMsg;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'same':\r\n\t\t\t\t\tif (data[rule[i].name] != rule[i].checkRule) { this.error = rule[i].errorMsg; return false;}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'notsame':\r\n\t\t\t\t\tif (data[rule[i].name] == rule[i].checkRule) { this.error = rule[i].errorMsg; return false; }\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'email':\r\n\t\t\t\t\tvar reg = /^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/;\r\n\t\t\t\t\tif (!reg.test(data[rule[i].name])) { this.error = rule[i].errorMsg; return false; }\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'phoneno':\r\n\t\t\t\t\tvar reg = /^1[0-9]{10,10}$/;\r\n\t\t\t\t\tif (!reg.test(data[rule[i].name])) { this.error = rule[i].errorMsg; return false; }\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'zipcode':\r\n\t\t\t\t\tvar reg = /^[0-9]{6}$/;\r\n\t\t\t\t\tif (!reg.test(data[rule[i].name])) { this.error = rule[i].errorMsg; return false; }\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'reg':\r\n\t\t\t\t\tvar reg = new RegExp(rule[i].checkRule);\r\n\t\t\t\t\tif (!reg.test(data[rule[i].name])) { this.error = rule[i].errorMsg; return false; }\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'in':\r\n\t\t\t\t\tif(rule[i].checkRule.indexOf(data[rule[i].name]) == -1){\r\n\t\t\t\t\t\tthis.error = rule[i].errorMsg; return false;\r\n\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'notnull':\r\n\t\t\t\t\tif(data[rule[i].name] == null || data[rule[i].name].length < 1){this.error = rule[i].errorMsg; return false;}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tisNumber : function (checkVal){\r\n\t\tvar reg = /^-?[1-9][0-9]?.?[0-9]*$/;\r\n\t\treturn reg.test(checkVal);\r\n\t}\r\n}"],"names":[],"mappings":"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"}