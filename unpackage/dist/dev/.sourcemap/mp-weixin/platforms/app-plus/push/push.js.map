{"version":3,"file":"push.js","sources":["platforms/app-plus/push/push.vue","../../../../../Work-Tools/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGxhdGZvcm1zL2FwcC1wbHVzL3B1c2gvcHVzaC52dWU"],"sourcesContent":["<template>\r\n    <view>\r\n        <page-head :title=\"title\"></page-head>\r\n        <view class=\"uni-padding-wrap\" v-if=\"provider[0]\">\r\n            <view class=\"uni-btn-v uni-common-mt\">\r\n                <button type=\"primary\" @tap=\"listenTranMsg\">监听透传数据</button>\r\n            </view>\r\n            <view class=\"uni-btn-v uni-common-mt\">\r\n                <button type=\"primary\" @tap=\"requireTranMsg\">发送\"透传数据\"消息</button>\r\n            </view>\r\n            <view class=\"uni-title uni-common-mt\">透传内容：</view>\r\n            <view class=\"uni-textarea\">\r\n                <textarea v-model=\"tranMsg\" />\r\n                </view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: 'push',\r\n\t\t\t\tprovider: [],\r\n\t\t\t\tpushServer: 'http://demo.dcloud.net.cn/push/?',\r\n\t\t\t\ttranMsg:''\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad: function () {\r\n\t\t\tuni.getProvider({\r\n\t\t\t\tservice: \"push\",\r\n\t\t\t\tsuccess: (e) => {\r\n\t\t\t\t\tconsole.log(\"success\", e);\r\n\t\t\t\t\tthis.provider = e.provider;\r\n\t\t\t\t},\r\n\t\t\t\tfail: (e) => {\r\n\t\t\t\t\tconsole.log(\"获取推送通道失败\", e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tonUnload:function(){\r\n\t\t\tthis.tranMsg = ''\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tlistenTranMsg() {\r\n                // IOS端在客户端在运行时收到推送消息触发receive事件，离线接收到的推送消息全部进入系统消息中心。点击消息中心的消息触发click\r\n                plus.push.addEventListener('click', (msg)=> {\r\n                    this.tranMsg = JSON.stringify(msg)\r\n                });\r\n\t\t\t\tplus.push.addEventListener('receive',(msg)=>{\r\n                    this.tranMsg = JSON.stringify(msg)\r\n                })\r\n                uni.showToast({\r\n                    title: '开始监听透传数据',\r\n                    icon: 'success'\r\n                })\r\n\t\t\t},\r\n\t\t\trequireTranMsg() { //请求‘透传数据’推送消息\r\n\t\t\t\tvar inf = plus.push.getClientInfo();\r\n\t\t\t\tvar url = this.pushServer + 'type=tran&appid=' + encodeURIComponent(plus.runtime.appid);\r\n\t\t\t\tinf.id && (url += '&id=' + inf.id);\r\n\t\t\t\turl += ('&cid=' + encodeURIComponent(inf.clientid));\r\n\t\t\t\tif (plus.os.name == 'iOS') {\r\n\t\t\t\t\turl += ('&token=' + encodeURIComponent(inf.token));\r\n\t\t\t\t}\r\n\t\t\t\turl += ('&title=' + encodeURIComponent('Hello uniapp'));\r\n\t\t\t\turl += ('&content=' + encodeURIComponent('带透传数据推送通知！'));\r\n\t\t\t\tif(plus.os.name === 'iOS'){\r\n\t\t\t\t\turl += ('&payload=' + encodeURIComponent('{\"title\":\"Hello uniapp Test\",\"content\":\"test content\"}'));\r\n\t\t\t\t}else{\r\n\t\t\t\t\turl += ('&payload=' + encodeURIComponent('\\'{\"title\":\"Hello uniapp Test\",\"content\":\"test content\"}\\''));\r\n\t\t\t\t}\r\n\t\t\t\turl += ('&version=' + encodeURIComponent(plus.runtime.version));\r\n\t\t\t\tplus.runtime.openURL(url);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n","import MiniProgramPage from 'D:/workspace/2025/wx/wx20250829/天天体验馆/platforms/app-plus/push/push.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAkBC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,OAAO;AAAA,MACP,UAAU,CAAE;AAAA,MACZ,YAAY;AAAA,MACZ,SAAQ;AAAA,IACT;AAAA,EACA;AAAA,EACD,QAAQ,WAAY;AACnBA,kBAAAA,MAAI,YAAY;AAAA,MACf,SAAS;AAAA,MACT,SAAS,CAAC,MAAM;AACfA,sBAAY,MAAA,MAAA,OAAA,0CAAA,WAAW,CAAC;AACxB,aAAK,WAAW,EAAE;AAAA,MAClB;AAAA,MACD,MAAM,CAAC,MAAM;AACZA,mFAAY,YAAY,CAAC;AAAA,MAC1B;AAAA,IACD,CAAC;AAAA,EACD;AAAA,EACD,UAAS,WAAU;AAClB,SAAK,UAAU;AAAA,EACf;AAAA,EACD,SAAS;AAAA,IACR,gBAAgB;AAEH,WAAK,KAAK,iBAAiB,SAAS,CAAC,QAAO;AACxC,aAAK,UAAU,KAAK,UAAU,GAAG;AAAA,MACrC,CAAC;AACb,WAAK,KAAK,iBAAiB,WAAU,CAAC,QAAM;AAC5B,aAAK,UAAU,KAAK,UAAU,GAAG;AAAA,OACpC;AACDA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,MAAM;AAAA,OACT;AAAA,IACb;AAAA,IACD,iBAAiB;AAChB,UAAI,MAAM,KAAK,KAAK,cAAa;AACjC,UAAI,MAAM,KAAK,aAAa,qBAAqB,mBAAmB,KAAK,QAAQ,KAAK;AACtF,UAAI,OAAO,OAAO,SAAS,IAAI;AAC/B,aAAQ,UAAU,mBAAmB,IAAI,QAAQ;AACjD,UAAI,KAAK,GAAG,QAAQ,OAAO;AAC1B,eAAQ,YAAY,mBAAmB,IAAI,KAAK;AAAA,MACjD;AACA,aAAQ,YAAY,mBAAmB,cAAc;AACrD,aAAQ,cAAc,mBAAmB,YAAY;AACrD,UAAG,KAAK,GAAG,SAAS,OAAM;AACzB,eAAQ,cAAc,mBAAmB,wDAAwD;AAAA,aAC7F;AACJ,eAAQ,cAAc,mBAAmB,0DAA4D;AAAA,MACtG;AACA,aAAQ,cAAc,mBAAmB,KAAK,QAAQ,OAAO;AAC7D,WAAK,QAAQ,QAAQ,GAAG;AAAA,IACzB;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;AC1ED,GAAG,WAAW,eAAe;"}