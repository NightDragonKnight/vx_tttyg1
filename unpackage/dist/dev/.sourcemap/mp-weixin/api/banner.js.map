{"version":3,"file":"banner.js","sources":["api/banner.js"],"sourcesContent":["// 轮播图管理API接口\r\nconst BASE_URL = 'https://api.example.com'; // 替换为实际的后端API地址\r\n\r\n/**\r\n * 获取轮播图列表\r\n * @param {Object} params - 查询参数\r\n * @returns {Promise} 轮播图数据\r\n */\r\nexport function getBannerList(params = {}) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tuni.request({\r\n\t\t\turl: `${BASE_URL}/banners`,\r\n\t\t\tmethod: 'GET',\r\n\t\t\tdata: params,\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\tresolve(res.data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treject(new Error('获取轮播图失败'));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\n/**\r\n * 获取首页轮播图\r\n * @returns {Promise} 首页轮播图数据\r\n */\r\nexport function getHomeBanners() {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tuni.request({\r\n\t\t\turl: `${BASE_URL}/banners/home`,\r\n\t\t\tmethod: 'GET',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\tresolve(res.data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treject(new Error('获取首页轮播图失败'));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\n/**\r\n * 添加轮播图\r\n * @param {Object} bannerData - 轮播图数据\r\n * @returns {Promise} 添加结果\r\n */\r\nexport function addBanner(bannerData) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tuni.request({\r\n\t\t\turl: `${BASE_URL}/banners`,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: bannerData,\r\n\t\t\theader: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`\r\n\t\t\t},\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.statusCode === 201) {\r\n\t\t\t\t\tresolve(res.data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treject(new Error('添加轮播图失败'));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\n/**\r\n * 更新轮播图\r\n * @param {Number} id - 轮播图ID\r\n * @param {Object} bannerData - 轮播图数据\r\n * @returns {Promise} 更新结果\r\n */\r\nexport function updateBanner(id, bannerData) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tuni.request({\r\n\t\t\turl: `${BASE_URL}/banners/${id}`,\r\n\t\t\tmethod: 'PUT',\r\n\t\t\tdata: bannerData,\r\n\t\t\theader: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`\r\n\t\t\t},\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\tresolve(res.data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treject(new Error('更新轮播图失败'));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\n/**\r\n * 删除轮播图\r\n * @param {Number} id - 轮播图ID\r\n * @returns {Promise} 删除结果\r\n */\r\nexport function deleteBanner(id) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tuni.request({\r\n\t\t\turl: `${BASE_URL}/banners/${id}`,\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\theader: {\r\n\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`\r\n\t\t\t},\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\tresolve(res.data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treject(new Error('删除轮播图失败'));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\n/**\r\n * 上传轮播图图片\r\n * @param {String} filePath - 图片文件路径\r\n * @returns {Promise} 上传结果\r\n */\r\nexport function uploadBannerImage(filePath) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tuni.uploadFile({\r\n\t\t\turl: `${BASE_URL}/upload/banner`,\r\n\t\t\tfilePath: filePath,\r\n\t\t\tname: 'image',\r\n\t\t\theader: {\r\n\t\t\t\t'Authorization': `Bearer ${uni.getStorageSync('token')}`\r\n\t\t\t},\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\tconst data = JSON.parse(res.data);\r\n\t\t\t\t\tresolve(data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treject(new Error('上传图片失败'));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\n/**\r\n * 轮播图数据结构示例\r\n */\r\nexport const BANNER_STRUCTURE = {\r\n\tid: 1,                    // 轮播图ID\r\n\ttitle: '轮播图标题',       // 轮播图标题\r\n\tdescription: '轮播图描述', // 轮播图描述\r\n\timage: '图片URL',         // 轮播图图片\r\n\tlinkType: 'activity',     // 链接类型：activity-活动, product-商品, url-外部链接\r\n\tlinkData: 'link_data',    // 链接数据\r\n\tsort: 1,                  // 排序权重\r\n\tstatus: 'active',         // 状态：active-启用, inactive-禁用\r\n\tstartTime: '2024-01-01',  // 开始时间\r\n\tendTime: '2024-12-31',    // 结束时间\r\n\tcreateTime: '2024-01-01', // 创建时间\r\n\tupdateTime: '2024-01-01'  // 更新时间\r\n};\r\n\r\n/**\r\n * 轮播图链接类型枚举\r\n */\r\nexport const LINK_TYPES = {\r\n\tACTIVITY: 'activity',     // 活动页面\r\n\tPRODUCT: 'product',       // 商品页面\r\n\tURL: 'url',              // 外部链接\r\n\tEXPERIENCE: 'experience' // 体验馆页面\r\n};\r\n\r\n/**\r\n * 轮播图状态枚举\r\n */\r\nexport const BANNER_STATUS = {\r\n\tACTIVE: 'active',         // 启用\r\n\tINACTIVE: 'inactive'      // 禁用\r\n};\r\n\r\n// 模拟数据（开发环境使用）\r\nexport const MOCK_BANNERS = [\r\n\t{\r\n\t\tid: 1,\r\n\t\ttitle: '新店开业大酬宾',\r\n\t\tdescription: '全场8折优惠，新用户首次体验更享特价！',\r\n\t\timage: '/static/image/day/轮播图1.jpg',\r\n\t\tlinkType: 'activity',\r\n\t\tlinkData: 'new_store_promotion',\r\n\t\tsort: 1,\r\n\t\tstatus: 'active',\r\n\t\tstartTime: '2024-01-01',\r\n\t\tendTime: '2024-12-31'\r\n\t},\r\n\t{\r\n\t\tid: 2,\r\n\t\ttitle: 'VR体验专区',\r\n\t\tdescription: '沉浸式虚拟现实体验，带你进入全新世界',\r\n\t\timage: '/static/image/day/轮播图2.jpg',\r\n\t\tlinkType: 'product',\r\n\t\tlinkData: 'vr_experience',\r\n\t\tsort: 2,\r\n\t\tstatus: 'active',\r\n\t\tstartTime: '2024-01-01',\r\n\t\tendTime: '2024-12-31'\r\n\t},\r\n\t{\r\n\t\tid: 3,\r\n\t\ttitle: '密室逃脱挑战',\r\n\t\tdescription: '惊险刺激的解密游戏，考验你的智慧',\r\n\t\timage: '/static/image/day/轮播图3.jpg',\r\n\t\tlinkType: 'product',\r\n\t\tlinkData: 'escape_room',\r\n\t\tsort: 3,\r\n\t\tstatus: 'active',\r\n\t\tstartTime: '2024-01-01',\r\n\t\tendTime: '2024-12-31'\r\n\t},\r\n\t{\r\n\t\tid: 4,\r\n\t\ttitle: '周末狂欢夜',\r\n\t\tdescription: '每周末特色体验项目限时开放',\r\n\t\timage: '/static/image/day/VR体验馆.jpg',\r\n\t\tlinkType: 'activity',\r\n\t\tlinkData: 'weekend_party',\r\n\t\tsort: 4,\r\n\t\tstatus: 'active',\r\n\t\tstartTime: '2024-01-01',\r\n\t\tendTime: '2024-12-31'\r\n\t}\r\n];\r\n\r\n/**\r\n * 获取模拟轮播图数据（开发环境使用）\r\n * @returns {Promise} 模拟轮播图数据\r\n */\r\nexport function getMockBanners() {\r\n\treturn new Promise((resolve) => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tresolve({\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tdata: MOCK_BANNERS.filter(banner => banner.status === 'active')\r\n\t\t\t});\r\n\t\t}, 500);\r\n\t});\r\n} "],"names":["uni"],"mappings":"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"}