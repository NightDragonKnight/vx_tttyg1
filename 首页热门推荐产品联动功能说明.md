# 首页热门推荐产品联动功能说明

## 功能概述
为首页热门推荐添加了完整的产品联动功能，支持体验馆产品和售卖产品的分类展示，同时保留接口以便后续对接真实数据。

## 主要功能特性

### 1. 分类标签切换 ✅
- **体验馆**：展示体验馆相关产品（VR、AR、密室逃脱、剧本杀等）
- **商品**：展示售卖的商品（VR设备、游戏手柄、按摩椅、台球杆等）
- **全部**：展示所有产品的混合列表

### 2. 产品数据联动 ✅
- **体验馆产品**：包含产品名称、描述、小时价格、套餐价格
- **售卖产品**：包含产品名称、描述、现价、原价、折扣信息
- **全部产品**：智能识别产品类型，自动跳转对应页面

### 3. 接口预留设计 ✅
- 保留完整的API接口结构
- 支持开发环境和生产环境切换
- 模拟数据与真实API无缝对接

## 数据结构设计

### 体验馆产品结构
```javascript
{
    id: 1,
    name: 'VR虚拟现实体验',
    description: '沉浸式虚拟现实体验，带你进入全新世界',
    price: '199',           // 小时价格
    packagePrice: '299',    // 套餐价格
    image: '/static/image/day/VR体验馆.jpg',
    isHot: true,            // 是否热门
    type: 'experience'      // 产品类型
}
```

### 售卖产品结构
```javascript
{
    id: 101,
    name: 'VR头显设备',
    description: '高清VR头显，支持多平台游戏',
    price: '2999',          // 现价
    originalPrice: '3999',  // 原价
    image: '/static/image/day/vr-headset.jpg',
    isHot: true,            // 是否热门
    discount: 7.5,          // 折扣
    type: 'product'         // 产品类型
}
```

## 页面布局结构

### 分类标签区域
```
[体验馆] [商品] [全部]
```

### 产品展示区域
- **体验馆产品**：2列网格布局，显示产品图片、名称、描述、价格信息
- **售卖产品**：2列网格布局，显示产品图片、名称、描述、价格、折扣
- **全部产品**：混合展示，智能识别产品类型

### 产品卡片信息
```
┌─────────────────┐
│   [产品图片]    │
│   [热门标签]    │
├─────────────────┤
│ 产品名称        │
│ 产品描述        │
│ 价格信息        │
└─────────────────┘
```

## 技术实现

### 1. 数据加载流程
```javascript
onLoad() → loadHotProducts() → API调用 → updateProductsData() → initAllProducts()
```

### 2. 分类切换逻辑
```javascript
switchCategory(categoryId) {
    this.activeCategory = categoryId;
    // 自动显示对应分类的产品列表
}
```

### 3. 产品跳转逻辑
```javascript
// 体验馆产品 → 预订详情页面
viewExperienceProduct(product) → /pages/tabBar/booking-detail/booking-detail

// 售卖产品 → 商品详情页面  
viewShopProduct(product) → /pages/shop/product-detail

// 全部产品 → 智能识别跳转
viewAllProduct(product) → 根据type自动选择跳转页面
```

## API接口设计

### 1. 主要接口
- `getHotProducts()` - 获取热门产品数据（生产环境）
- `getMockHotProducts()` - 获取模拟数据（开发环境）
- `getExperienceProducts()` - 获取体验馆产品列表
- `getShopProducts()` - 获取售卖产品列表
- `getProductDetail()` - 获取产品详情
- `searchProducts()` - 搜索产品

### 2. 接口结构
```javascript
{
    success: true,
    data: {
        experienceProducts: [...],  // 体验馆产品数组
        shopProducts: [...]         // 售卖产品数组
    }
}
```

### 3. 环境切换逻辑
```javascript
const isDev = process.env.NODE_ENV === 'development';

if (isDev) {
    // 开发环境：使用模拟数据
    getMockHotProducts()
} else {
    // 生产环境：使用真实API
    getHotProducts()
}
```

## 样式设计

### 1. 分类标签样式
- **默认状态**：浅灰色背景，深色文字
- **选中状态**：粉色背景，白色文字
- **交互效果**：悬停和点击动画

### 2. 产品卡片样式
- **网格布局**：2列等宽布局
- **卡片设计**：圆角边框，阴影效果
- **响应式**：适配不同屏幕尺寸

### 3. 产品标签样式
- **热门标签**：🔥 图标，粉色背景
- **折扣标签**：折扣信息，红色背景
- **位置**：右上角绝对定位

## 用户体验流程

### 1. 进入首页
- 默认显示"体验馆"分类
- 展示体验馆相关产品
- 加载产品数据（模拟或真实）

### 2. 切换分类
- 点击"商品"标签 → 显示售卖产品
- 点击"全部"标签 → 显示所有产品
- 点击"体验馆"标签 → 返回体验馆产品

### 3. 查看产品
- 点击体验馆产品 → 跳转预订详情页面
- 点击售卖产品 → 跳转商品详情页面
- 智能识别产品类型，自动选择跳转页面

## 开发调试

### 1. 测试按钮
- 页面右上角"📢"按钮
- 用于测试公告弹窗功能
- 生产环境可删除

### 2. 控制台日志
- 分类切换：`切换到分类: experience`
- 产品查看：`查看体验馆产品: {...}`
- API调用：`加载模拟热门产品失败: ...`

### 3. 数据验证
- 检查产品数据是否正确加载
- 验证分类切换是否正常工作
- 确认产品跳转是否准确

## 后续扩展

### 1. 真实API对接
- 替换模拟数据接口
- 添加错误处理和重试机制
- 实现数据缓存和更新策略

### 2. 功能增强
- 添加产品搜索功能
- 实现产品收藏功能
- 添加产品评价和推荐

### 3. 性能优化
- 图片懒加载
- 分页加载
- 数据预取

## 文件修改清单

### 主要文件
- `pages/tabBar/home/home.vue` - 首页主要功能实现
- `api/products.js` - 产品相关API接口

### 修改内容
1. **模板结构**：添加分类标签和产品展示区域
2. **数据管理**：新增产品数据结构和分类管理
3. **方法实现**：添加数据加载、分类切换、产品查看等方法
4. **样式设计**：新增分类标签和产品卡片样式
5. **接口预留**：创建完整的API接口结构

## 注意事项

1. **图片资源**：确保所有产品图片路径正确
2. **页面跳转**：验证跳转页面是否存在
3. **数据一致性**：确保体验馆产品和预订详情页数据一致
4. **接口对接**：后续替换模拟数据为真实API
5. **样式兼容**：在不同设备上测试显示效果

现在首页热门推荐已经具备完整的产品联动功能，支持体验馆产品和售卖产品的分类展示，用户体验更加丰富！ 